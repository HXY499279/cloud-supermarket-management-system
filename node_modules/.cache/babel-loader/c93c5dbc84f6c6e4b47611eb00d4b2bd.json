{"ast":null,"code":"import { __extends } from \"tslib\";\nimport { Action } from '..';\nvar DIM_X = 'x';\nvar DIM_Y = 'y';\n/**\n * Scale translate\n * @ignore\n */\n\nvar ScaleTranslate =\n/** @class */\nfunction (_super) {\n  __extends(ScaleTranslate, _super);\n\n  function ScaleTranslate() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.dims = [DIM_X, DIM_Y];\n    _this.cfgFields = ['dims'];\n    _this.cacheScaleDefs = {};\n    return _this;\n  } // 是否支持对应字段的平移\n\n\n  ScaleTranslate.prototype.hasDim = function (dim) {\n    return this.dims.includes(dim);\n  };\n\n  ScaleTranslate.prototype.getScale = function (dim) {\n    var view = this.context.view;\n\n    if (dim === 'x') {\n      return view.getXScale();\n    } else {\n      return view.getYScales()[0];\n    }\n  };\n\n  ScaleTranslate.prototype.resetDim = function (dim) {\n    var view = this.context.view;\n\n    if (this.hasDim(dim) && this.cacheScaleDefs[dim]) {\n      var scale = this.getScale(dim);\n      view.scale(scale.field, this.cacheScaleDefs[dim]);\n      this.cacheScaleDefs[dim] = null;\n    }\n  };\n  /**\n   * 回滚\n   */\n\n\n  ScaleTranslate.prototype.reset = function () {\n    this.resetDim(DIM_X);\n    this.resetDim(DIM_Y);\n    var view = this.context.view;\n    view.render(true);\n  };\n\n  return ScaleTranslate;\n}(Action);\n\nexport default ScaleTranslate;","map":{"version":3,"sources":["../../../../src/interaction/action/view/scale-transform.ts"],"names":[],"mappings":";AAAA,SAAS,MAAT,QAAuB,IAAvB;AAEA,IAAM,KAAK,GAAG,GAAd;AACA,IAAM,KAAK,GAAG,GAAd;AAEA;;;AAGG;;AACH,IAAA,cAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAA6B,EAAA,SAAA,CAAA,cAAA,EAAA,MAAA,CAAA;;AAA7B,WAAA,cAAA,GAAA;AAAA,QAAA,KAAA,GAAA,MAAA,KAAA,IAAA,IAAA,MAAA,CAAA,KAAA,CAAA,IAAA,EAAA,SAAA,CAAA,IAAA,IAAA;;AACY,IAAA,KAAA,CAAA,IAAA,GAAO,CAAC,KAAD,EAAQ,KAAR,CAAP;AACA,IAAA,KAAA,CAAA,SAAA,GAAY,CAAC,MAAD,CAAZ;AACA,IAAA,KAAA,CAAA,cAAA,GAAiB,EAAjB;;AAkCX,GArCD,CAKE;;;AACU,EAAA,cAAA,CAAA,SAAA,CAAA,MAAA,GAAV,UAAiB,GAAjB,EAAoB;AAClB,WAAO,KAAK,IAAL,CAAU,QAAV,CAAmB,GAAnB,CAAP;AACD,GAFS;;AAIA,EAAA,cAAA,CAAA,SAAA,CAAA,QAAA,GAAV,UAAmB,GAAnB,EAAsB;AACpB,QAAM,IAAI,GAAG,KAAK,OAAL,CAAa,IAA1B;;AACA,QAAI,GAAG,KAAK,GAAZ,EAAiB;AACf,aAAO,IAAI,CAAC,SAAL,EAAP;AACD,KAFD,MAEO;AACL,aAAO,IAAI,CAAC,UAAL,GAAkB,CAAlB,CAAP;AACD;AACF,GAPS;;AASF,EAAA,cAAA,CAAA,SAAA,CAAA,QAAA,GAAR,UAAiB,GAAjB,EAAoB;AAClB,QAAM,IAAI,GAAG,KAAK,OAAL,CAAa,IAA1B;;AACA,QAAI,KAAK,MAAL,CAAY,GAAZ,KAAoB,KAAK,cAAL,CAAoB,GAApB,CAAxB,EAAkD;AAChD,UAAM,KAAK,GAAG,KAAK,QAAL,CAAc,GAAd,CAAd;AACA,MAAA,IAAI,CAAC,KAAL,CAAW,KAAK,CAAC,KAAjB,EAAwB,KAAK,cAAL,CAAoB,GAApB,CAAxB;AACA,WAAK,cAAL,CAAoB,GAApB,IAA2B,IAA3B;AACD;AACF,GAPO;AASR;;AAEG;;;AACI,EAAA,cAAA,CAAA,SAAA,CAAA,KAAA,GAAP,YAAA;AACE,SAAK,QAAL,CAAc,KAAd;AACA,SAAK,QAAL,CAAc,KAAd;AACA,QAAM,IAAI,GAAG,KAAK,OAAL,CAAa,IAA1B;AACA,IAAA,IAAI,CAAC,MAAL,CAAY,IAAZ;AACD,GALM;;AAMT,SAAA,cAAA;AAAC,CArCD,CAA6B,MAA7B,CAAA;;AAuCA,eAAe,cAAf","sourcesContent":["import { Action } from '..';\n\nconst DIM_X = 'x';\nconst DIM_Y = 'y';\n\n/**\n * Scale translate\n * @ignore\n */\nclass ScaleTranslate extends Action {\n  protected dims = [DIM_X, DIM_Y];\n  protected cfgFields = ['dims'];\n  protected cacheScaleDefs = {};\n\n  // 是否支持对应字段的平移\n  protected hasDim(dim) {\n    return this.dims.includes(dim);\n  }\n\n  protected getScale(dim) {\n    const view = this.context.view;\n    if (dim === 'x') {\n      return view.getXScale();\n    } else {\n      return view.getYScales()[0];\n    }\n  }\n\n  private resetDim(dim) {\n    const view = this.context.view;\n    if (this.hasDim(dim) && this.cacheScaleDefs[dim]) {\n      const scale = this.getScale(dim);\n      view.scale(scale.field, this.cacheScaleDefs[dim]);\n      this.cacheScaleDefs[dim] = null;\n    }\n  }\n\n  /**\n   * 回滚\n   */\n  public reset() {\n    this.resetDim(DIM_X);\n    this.resetDim(DIM_Y);\n    const view = this.context.view;\n    view.render(true);\n  }\n}\n\nexport default ScaleTranslate;\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}