{"ast":null,"code":"import _objectSpread from\"D:/code/cloud-supermarket-management-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"D:/code/cloud-supermarket-management-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"D:/code/cloud-supermarket-management-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"D:/code/cloud-supermarket-management-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"D:/code/cloud-supermarket-management-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Form,Input,Button,message,PageHeader,Upload}from'antd';import'./index.css';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var layout={labelCol:{span:8},wrapperCol:{span:6}};var tailLayout={wrapperCol:{offset:10,span:16}};var AdmAddAd=/*#__PURE__*/function(_Component){_inherits(AdmAddAd,_Component);var _super=_createSuper(AdmAddAd);function AdmAddAd(props){var _this;_classCallCheck(this,AdmAddAd);_this=_super.call(this,props);_this.property={name:'file',headers:{authorization:'authorization-text'},beforeUpload:function beforeUpload(){return false;},maxCount:1};_this.uploadTheadid=function(){};_this.onFinish=function(data){if(data.adCompany.search(/\\s/)===-1&&data.adName.search(/\\s/)===-1&&data.category.search(/\\s/)===-1){var formData=new FormData();formData.append(\"file\",data.file.file);formData.append(\"adCompany\",data.adCompany);formData.append(\"adName\",data.adName);formData.append(\"category\",data.category);// console.log(data.file)\n// console.log(formData.get(\"file\"))\naxios({// 后端接口\nurl:'/addad',method:'post',// 传递给后端的数据\ndata:formData}).then(function(res){console.log(res);message.success(\"广告添加成功！\");window.location.href='/home/adm';},function(){message.error(\"广告添加失败！\");});}else{message.warning(\"输入内容不能含有空格！\");}};_this.state={file:'',adid:'',adNumber:props};console.log(props);return _this;}_createClass(AdmAddAd,[{key:\"render\",value:function render(){return this.state.adNumber>=3?window.location.href=\"/home/adm\":/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(PageHeader,{className:\"site-page-header\",onBack:function onBack(){window.location.href='/home/adm';},subTitle:\"\\u5E7F\\u544A\\u6295\\u653E\\u7BA1\\u7406/\\u65B0\\u589E\\u5E7F\\u544A\",style:{paddingLeft:10,backgroundColor:'white'}}),/*#__PURE__*/_jsxs(Form,_objectSpread(_objectSpread({},layout),{},{id:\"addAdForm\",name:\"basic\",size:\"large\",initialValues:{remember:true},onFinish:this.onFinish,encType:\"multipart/form-data\",children:[/*#__PURE__*/_jsx(Form.Item,{label:\"\\u5E7F\\u544A\\u516C\\u53F8\",name:\"adCompany\",required:false,rules:[{required:true,message:'请输入广告公司名称！'}],children:/*#__PURE__*/_jsx(Input,{})}),/*#__PURE__*/_jsx(Form.Item,{label:\"\\u5E7F\\u544A\\u540D\\u79F0\",name:\"adName\",required:false,rules:[{required:true,message:'请输入广告名称！'}],children:/*#__PURE__*/_jsx(Input,{})}),/*#__PURE__*/_jsx(Form.Item,{label:\"\\u6240\\u5C5E\\u5206\\u7C7B\",name:\"category\",required:false,rules:[{required:true,message:'请输入广告分类！'}],children:/*#__PURE__*/_jsx(Input,{})}),/*#__PURE__*/_jsx(Form.Item,{label:\"\\u56FE\\u7247\\u5730\\u5740\",name:\"file\",required:false,rules:[{required:true,message:'请输入广告图片地址！'}],children:/*#__PURE__*/_jsx(Upload,_objectSpread(_objectSpread({},this.property),{},{children:/*#__PURE__*/_jsx(Button,{type:\"primary\",size:\"middle\",style:{borderRadius:5},children:\"\\u4E0A\\u4F20\\u56FE\\u7247\"})}))}),/*#__PURE__*/_jsx(Form.Item,_objectSpread(_objectSpread({},tailLayout),{},{children:/*#__PURE__*/_jsx(Button,{type:\"primary\",htmlType:\"submit\",style:{borderRadius:5},children:\"\\u6DFB\\u52A0\"})}))]}))]});}}]);return AdmAddAd;}(Component);export{AdmAddAd as default};","map":{"version":3,"sources":["D:/code/cloud-supermarket-management-system/src/utils/AdmAddAd/AdmAddAd.jsx"],"names":["React","Component","Form","Input","Button","message","PageHeader","Upload","axios","layout","labelCol","span","wrapperCol","tailLayout","offset","AdmAddAd","props","property","name","headers","authorization","beforeUpload","maxCount","uploadTheadid","onFinish","data","adCompany","search","adName","category","formData","FormData","append","file","url","method","then","res","console","log","success","window","location","href","error","warning","state","adid","adNumber","paddingLeft","backgroundColor","remember","required","borderRadius"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { Form, Input, Button, message, PageHeader, Upload } from 'antd';\r\nimport './index.css'\r\nimport axios from 'axios'\r\n\r\nconst layout = {\r\n    labelCol: { span: 8 },\r\n    wrapperCol: { span: 6 },\r\n};\r\nconst tailLayout = {\r\n    wrapperCol: { offset: 10, span: 16 },\r\n};\r\n\r\nexport default class AdmAddAd extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            file: '',\r\n            adid: '',\r\n            adNumber: props\r\n        }\r\n        console.log(props)\r\n    }\r\n\r\n    property = {\r\n        name: 'file',\r\n        headers: {\r\n            authorization: 'authorization-text'\r\n        },\r\n        beforeUpload: () => {\r\n            return false\r\n        },\r\n        maxCount: 1\r\n    };\r\n\r\n    uploadTheadid = () => {\r\n\r\n    }\r\n\r\n    onFinish = (data) => {\r\n        if (data.adCompany.search(/\\s/) === -1 && data.adName.search(/\\s/) === -1 && data.category.search(/\\s/) === -1) {\r\n            let formData = new FormData()\r\n            formData.append(\"file\", data.file.file);\r\n            formData.append(\"adCompany\", data.adCompany);\r\n            formData.append(\"adName\", data.adName);\r\n            formData.append(\"category\", data.category)\r\n            // console.log(data.file)\r\n            // console.log(formData.get(\"file\"))\r\n\r\n            axios({\r\n                // 后端接口\r\n                url: '/addad',\r\n                method: 'post',\r\n                // 传递给后端的数据\r\n                data: formData,\r\n            })\r\n                .then(res => {\r\n                    console.log(res)\r\n                    message.success(\"广告添加成功！\")\r\n                    window.location.href = '/home/adm'\r\n                }, () => {\r\n                    message.error(\"广告添加失败！\")\r\n                })\r\n        } else {\r\n            message.warning(\"输入内容不能含有空格！\")\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (this.state.adNumber >= 3) ? (window.location.href = \"/home/adm\") : (\r\n            <div>\r\n                <PageHeader\r\n                    className=\"site-page-header\"\r\n                    onBack={() => { window.location.href = '/home/adm' }}\r\n                    subTitle=\"广告投放管理/新增广告\"\r\n                    style={{ paddingLeft: 10, backgroundColor: 'white' }}\r\n                />\r\n                <Form\r\n                    {...layout}\r\n                    id=\"addAdForm\"\r\n                    name=\"basic\"\r\n                    size=\"large\"\r\n                    initialValues={{ remember: true }}\r\n                    onFinish={this.onFinish}\r\n                    encType=\"multipart/form-data\"\r\n                >\r\n                    <Form.Item\r\n                        label=\"广告公司\"\r\n                        name=\"adCompany\"\r\n                        required={false}\r\n                        rules={[{ required: true, message: '请输入广告公司名称！' }]}\r\n                    >\r\n                        <Input />\r\n                    </Form.Item>\r\n\r\n                    <Form.Item\r\n                        label=\"广告名称\"\r\n                        name=\"adName\"\r\n                        required={false}\r\n                        rules={[{ required: true, message: '请输入广告名称！' }]}\r\n                    >\r\n                        <Input />\r\n                    </Form.Item>\r\n\r\n                    <Form.Item\r\n                        label=\"所属分类\"\r\n                        name=\"category\"\r\n                        required={false}\r\n                        rules={[{ required: true, message: '请输入广告分类！' }]}\r\n                    >\r\n                        <Input />\r\n                    </Form.Item>\r\n\r\n                    <Form.Item\r\n                        label=\"图片地址\"\r\n                        name=\"file\"\r\n                        required={false}\r\n                        rules={[{ required: true, message: '请输入广告图片地址！' }]}\r\n                    >\r\n                        <Upload {...this.property}>\r\n                            <Button\r\n                                type=\"primary\"\r\n                                size=\"middle\"\r\n                                style={{ borderRadius: 5 }}\r\n                            >\r\n                                上传图片\r\n                            </Button>\r\n                        </Upload>\r\n                    </Form.Item>\r\n\r\n                    <Form.Item {...tailLayout}>\r\n                        <Button type=\"primary\" htmlType=\"submit\" style={{ borderRadius: 5 }}>\r\n                            添加\r\n                        </Button>\r\n                    </Form.Item>\r\n                </Form>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}