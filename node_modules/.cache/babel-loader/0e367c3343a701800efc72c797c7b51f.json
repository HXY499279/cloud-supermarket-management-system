{"ast":null,"code":"var _jsxFileName = \"D:\\\\code\\\\cloud-supermarket-management-system\\\\src\\\\components\\\\Content\\\\Om\\\\Om.jsx\";\nimport React, { Component } from 'react';\nimport { Descriptions, Divider, Breadcrumb, Button, Input, message, InputNumber, DatePicker, Table, ConfigProvider, Popconfirm, Row, Col, Space, Affix } from 'antd';\nimport { BrowserRouter, Link, Switch, Route } from 'react-router-dom';\nimport { nanoid } from 'nanoid';\nimport reqwest from 'reqwest';\nimport InfiniteScroll from 'react-infinite-scroller';\nimport { SearchOutlined } from '@ant-design/icons';\nimport './index.css'; // 配置中文环境\n\nimport zh_CN from 'antd/lib/locale-provider/zh_CN';\nimport 'moment/locale/zh-cn';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst {\n  RangePicker\n} = DatePicker;\n\nconst getRandomuserParams = params => ({\n  results: params.pagination.pageSize,\n  page: params.pagination.current,\n  ...params\n});\n\nexport default class Om extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      date: [],\n      data: [],\n      pagination: {\n        current: 1,\n        pageSize: 10\n      },\n      loading: false\n    };\n    this.columns = [{\n      title: '订单id',\n      dataIndex: 'ofid',\n      key: 'ofid',\n      defaultSortOrder: 'ascend',\n      sorter: (a, b) => a.id - b.id\n    }, {\n      title: '用户id',\n      dataIndex: 'uid',\n      key: 'uid'\n    }, {\n      title: '总价',\n      dataIndex: 'totalPrice',\n      key: 'totalPrice'\n    }, {\n      title: '订单状态',\n      dataIndex: 'status',\n      key: 'status'\n    }, {\n      title: '下单时间',\n      dataIndex: 'time',\n      key: 'time'\n    }, {\n      title: '备注',\n      dataIndex: 'remarks',\n      key: 'remarks'\n    }, {\n      title: '操作',\n      dataIndex: 'ofid',\n      key: 'ofid',\n      render: ofid => {\n        return /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            type: \"primary\",\n            style: {\n              borderRadius: 5,\n              marginLeft: 20\n            },\n            children: /*#__PURE__*/_jsxDEV(Popconfirm, {\n              title: \"\\u786E\\u5B9A\\u5417?\",\n              onConfirm: this.confirm.bind(this, ofid),\n              okText: \"\\u786E\\u8BA4\",\n              cancelText: \"\\u53D6\\u6D88\",\n              children: \"\\u53D1\\u8D27\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 25\n          }, this)\n        }, void 0, false);\n      }\n    }];\n\n    this.dateOnChange = (value, dateString) => {\n      let startDate = dateString[0].replace(/\\//g, \"-\");\n      let endDate = dateString[1].replace(/\\//g, \"-\");\n      let date = [startDate, endDate];\n      this.setState({\n        date: date\n      });\n    };\n\n    this.OmSearch = () => {\n      console.log(this.state.date);\n      let [oid, ofName, date] = [this.idInput.value, this.nameInput.state.value, this.state.date];\n      const data = {\n        oid,\n        ofName,\n        date\n      };\n      console.log(data);\n      reqwest({\n        url: 'searchorderform',\n        method: 'post',\n        type: 'json',\n        data: data\n      });\n    };\n\n    this.handleTableChange = pagination => {\n      console.log(pagination);\n      let {\n        current,\n        pageSize\n      } = pagination; // console.log(pagination)\n\n      this.setState({\n        pagination: {\n          current,\n          pageSize\n        }\n      });\n      this.fetch({\n        pagination\n      });\n    };\n\n    this.fetch = (params = {}) => {\n      this.setState({\n        loading: true\n      });\n      reqwest({\n        // 后端接口\n        url: '/om/oflist',\n        method: 'post',\n        type: 'json',\n        // 传递给后端的数据\n        data: getRandomuserParams(params)\n      }).then(data => {\n        this.setState({\n          loading: false,\n          // 根据接口返回的数据源\n          data: data.results,\n          pagination: { ...params.pagination,\n            // 根据接口返回的总条数\n            total: data.total\n          }\n        });\n      });\n    };\n  }\n\n  confirm(id) {\n    let {\n      current,\n      pageSize\n    } = this.state.pagination;\n    const data = {\n      id: id,\n      current,\n      pageSize\n    };\n    reqwest({\n      // 后端接口\n      url: '/deleteuser',\n      method: 'post',\n      type: 'json',\n      // 传递给后端的数据\n      data: data\n    }) //根据返回的状态码status判断是否删除用户成功\n    .then(res => {\n      console.log(res);\n      this.setState({\n        data: res.results\n      });\n\n      if (res.status === 'success') {\n        message.success('删除成功');\n      } else {\n        message.error('删除失败');\n      }\n    });\n  }\n\n  componentDidMount() {\n    const {\n      pagination\n    } = this.state;\n    this.fetch({\n      pagination\n    });\n  }\n\n  render() {\n    const {\n      data,\n      pagination,\n      loading\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Divider, {\n        style: {\n          margin: 0\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"Om-head\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"Om-desc-wraper\",\n          children: [/*#__PURE__*/_jsxDEV(Breadcrumb, {\n            className: \"bdc\",\n            children: [/*#__PURE__*/_jsxDEV(Breadcrumb.Item, {\n              children: /*#__PURE__*/_jsxDEV(\"a\", {\n                href: \"/home\",\n                children: \"\\u4E3B\\u9875\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 200,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Breadcrumb.Item, {\n              children: \"\\u8BA2\\u5355\\u4FE1\\u606F\\u7BA1\\u7406\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Descriptions, {\n            title: \"\\u8BA2\\u5355\\u7BA1\\u7406\",\n            className: \"desc\",\n            children: /*#__PURE__*/_jsxDEV(Descriptions.Item, {\n              children: \"\\u5C55\\u793A\\u8BA2\\u5355\\u4FE1\\u606F\\uFF0C\\u67E5\\u8BE2\\u8BA2\\u5355\\uFF0C\\u67E5\\u770B\\u8BA2\\u5355\\u72B6\\u6001\\uFF0C\\u5904\\u7406\\u8BA2\\u5355\\u7684\\u53D1\\u8D27\\uFF0C\\u786E\\u8BA4\\u9001\\u8FBE\\u548C\\u9000\\u6B3E\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 205,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"status-switch\",\n          children: /*#__PURE__*/_jsxDEV(Space, {\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              className: \"status-button sendgoods\",\n              children: \"\\u5F85\\u53D1\\u8D27\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              className: \"status-button delivery\",\n              children: \"\\u914D\\u9001\\u4E2D\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              className: \"status-button success\",\n              children: \"\\u5DF2\\u6210\\u529F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              className: \"status-button refund\",\n              children: \"\\u9000\\u6B3E\\u4E2D\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              className: \"status-button refunded\",\n              children: \"\\u5DF2\\u9000\\u6B3E\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search\",\n        children: [/*#__PURE__*/_jsxDEV(Divider, {\n          style: {\n            margin: 0\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Space, {\n          style: {\n            marginTop: 20\n          },\n          size: 20,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\"\\u8BA2\\u5355id:\", /*#__PURE__*/_jsxDEV(InputNumber, {\n              name: \"Oid\",\n              className: \"Om-input\",\n              ref: elev => {\n                this.idInput = elev;\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\"\\u7528\\u6237\\u540D\\u79F0:\", /*#__PURE__*/_jsxDEV(Input, {\n              name: \"commodity\",\n              className: \"Om-input\",\n              ref: elev => {\n                this.nameInput = elev;\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\"\\u65F6\\u95F4:\", /*#__PURE__*/_jsxDEV(ConfigProvider, {\n              locale: zh_CN,\n              children: /*#__PURE__*/_jsxDEV(RangePicker, {\n                showTime: true,\n                format: \"YYYY-MM-DD HH:mm\",\n                onChange: this.dateOnChange,\n                ref: elev => {\n                  this.dateElev = elev;\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 232,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginLeft: 20\n            },\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              type: \"primary\",\n              shape: \"circle\",\n              icon: /*#__PURE__*/_jsxDEV(SearchOutlined, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 241,\n                columnNumber: 73\n              }, this),\n              onClick: this.OmSearch\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 241,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tableWraper contentWraper\",\n        children: /*#__PURE__*/_jsxDEV(Table, {\n          columns: this.columns,\n          dataSource: data,\n          pagination: pagination,\n          loading: loading,\n          onChange: this.handleTableChange,\n          bordered: true,\n          expandable: {\n            expandedRowRender: record => {\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"sub-order\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [\"\\u7528\\u6237\\u6536\\u8D27\\u5730\\u5740: \", record.address, \" \", record.uname, \" \", record.phone, \" \"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 256,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  style: {\n                    fontWeight: 600\n                  },\n                  children: \"\\u5546\\u54C1:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 257,\n                  columnNumber: 37\n                }, this), record.commodityDetails.map(item => {\n                  return /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"commodity-details\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: \"\\u7F16\\u53F7\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 260,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 259,\n                    columnNumber: 48\n                  }, this);\n                })]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 255,\n                columnNumber: 40\n              }, this);\n            }\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["D:/code/cloud-supermarket-management-system/src/components/Content/Om/Om.jsx"],"names":["React","Component","Descriptions","Divider","Breadcrumb","Button","Input","message","InputNumber","DatePicker","Table","ConfigProvider","Popconfirm","Row","Col","Space","Affix","BrowserRouter","Link","Switch","Route","nanoid","reqwest","InfiniteScroll","SearchOutlined","zh_CN","RangePicker","getRandomuserParams","params","results","pagination","pageSize","page","current","Om","state","date","data","loading","columns","title","dataIndex","key","defaultSortOrder","sorter","a","b","id","render","ofid","borderRadius","marginLeft","confirm","bind","dateOnChange","value","dateString","startDate","replace","endDate","setState","OmSearch","console","log","oid","ofName","idInput","nameInput","url","method","type","handleTableChange","fetch","then","total","res","status","success","error","componentDidMount","margin","marginTop","elev","dateElev","expandedRowRender","record","address","uname","phone","fontWeight","commodityDetails","map","item"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { Descriptions, Divider, Breadcrumb, Button, Input, message, InputNumber, DatePicker, Table, ConfigProvider, Popconfirm, Row, Col, Space, Affix } from 'antd';\r\nimport { BrowserRouter, Link, Switch, Route } from 'react-router-dom'\r\nimport { nanoid } from 'nanoid'\r\nimport reqwest from 'reqwest';\r\nimport InfiniteScroll from 'react-infinite-scroller';\r\nimport { SearchOutlined } from '@ant-design/icons'\r\nimport './index.css'\r\n// 配置中文环境\r\nimport zh_CN from 'antd/lib/locale-provider/zh_CN';\r\nimport 'moment/locale/zh-cn';\r\n\r\nconst { RangePicker } = DatePicker;\r\n\r\n\r\nconst getRandomuserParams = params => ({\r\n    results: params.pagination.pageSize,\r\n    page: params.pagination.current,\r\n    ...params,\r\n});\r\n\r\n\r\nexport default class Om extends Component {\r\n\r\n    state = {\r\n        date: [],\r\n        data: [],\r\n        pagination: {\r\n            current: 1,\r\n            pageSize: 10,\r\n        },\r\n        loading: false,\r\n    };\r\n\r\n    columns = [\r\n        {\r\n            title: '订单id',\r\n            dataIndex: 'ofid',\r\n            key: 'ofid',\r\n            defaultSortOrder: 'ascend',\r\n            sorter: (a, b) => a.id - b.id,\r\n        },\r\n        {\r\n            title: '用户id',\r\n            dataIndex: 'uid',\r\n            key: 'uid'\r\n        },\r\n        {\r\n            title: '总价',\r\n            dataIndex: 'totalPrice',\r\n            key: 'totalPrice',\r\n        },\r\n        {\r\n            title: '订单状态',\r\n            dataIndex: 'status',\r\n            key: 'status',\r\n        },\r\n        {\r\n            title: '下单时间',\r\n            dataIndex: 'time',\r\n            key: 'time',\r\n        },\r\n        {\r\n            title: '备注',\r\n            dataIndex: 'remarks',\r\n            key: 'remarks',\r\n        },\r\n        {\r\n            title: '操作',\r\n            dataIndex: 'ofid',\r\n            key: 'ofid',\r\n            render: (ofid) => {\r\n                return (\r\n                    <>\r\n                        <Button\r\n                            type=\"primary\"\r\n                            style={{ borderRadius: 5, marginLeft: 20 }}\r\n                        >\r\n                            <Popconfirm\r\n                                title=\"确定吗?\"\r\n                                onConfirm={this.confirm.bind(this, ofid)}\r\n                                okText=\"确认\"\r\n                                cancelText=\"取消\"\r\n                            >\r\n                                发货\r\n                            </Popconfirm>\r\n                        </Button>\r\n                    </>\r\n                )\r\n            }\r\n        },\r\n    ];\r\n\r\n    confirm(id) {\r\n        let { current, pageSize } = this.state.pagination\r\n        const data = { id: id, current, pageSize }\r\n        reqwest({\r\n            // 后端接口\r\n            url: '/deleteuser',\r\n            method: 'post',\r\n            type: 'json',\r\n            // 传递给后端的数据\r\n            data: data,\r\n        })\r\n            //根据返回的状态码status判断是否删除用户成功\r\n            .then(res => {\r\n                console.log(res)\r\n                this.setState({\r\n                    data: res.results\r\n                })\r\n                if (res.status === 'success') {\r\n                    message.success('删除成功');\r\n                } else {\r\n                    message.error('删除失败');\r\n                }\r\n            })\r\n    }\r\n\r\n    dateOnChange = (value, dateString) => {\r\n        let startDate = dateString[0].replace(/\\//g, \"-\")\r\n        let endDate = dateString[1].replace(/\\//g, \"-\")\r\n        let date = [startDate, endDate]\r\n        this.setState({\r\n            date: date\r\n        })\r\n    }\r\n\r\n    OmSearch = () => {\r\n        console.log(this.state.date)\r\n        let [oid, ofName, date] = [\r\n            this.idInput.value,\r\n            this.nameInput.state.value,\r\n            this.state.date\r\n        ]\r\n        const data = { oid, ofName, date }\r\n        console.log(data)\r\n        reqwest({\r\n            url: 'searchorderform',\r\n            method: 'post',\r\n            type: 'json',\r\n            data: data\r\n        })\r\n    }\r\n\r\n    handleTableChange = (pagination) => {\r\n        console.log(pagination)\r\n        let { current, pageSize } = pagination\r\n        // console.log(pagination)\r\n        this.setState({\r\n            pagination: {\r\n                current,\r\n                pageSize\r\n            }\r\n        })\r\n        this.fetch({\r\n            pagination,\r\n        });\r\n    };\r\n\r\n    fetch = (params = {}) => {\r\n        this.setState({ loading: true });\r\n        reqwest({\r\n            // 后端接口\r\n            url: '/om/oflist',\r\n            method: 'post',\r\n            type: 'json',\r\n            // 传递给后端的数据\r\n            data: getRandomuserParams(params),\r\n        })\r\n            .then(data => {\r\n                this.setState({\r\n                    loading: false,\r\n                    // 根据接口返回的数据源\r\n                    data: data.results,\r\n                    pagination: {\r\n                        ...params.pagination,\r\n                        // 根据接口返回的总条数\r\n                        total: data.total,\r\n                    },\r\n                });\r\n            })\r\n            ;\r\n    };\r\n\r\n\r\n    componentDidMount() {\r\n        const { pagination } = this.state;\r\n        this.fetch({ pagination });\r\n    }\r\n\r\n    render() {\r\n        const { data, pagination, loading } = this.state;\r\n        return (\r\n            <div>\r\n                <Divider style={{ margin: 0 }} />\r\n                <div className=\"Om-head\">\r\n                    <div className=\"Om-desc-wraper\">\r\n                        <Breadcrumb className=\"bdc\">\r\n                            <Breadcrumb.Item>\r\n                                <a href=\"/home\">主页</a>\r\n                            </Breadcrumb.Item>\r\n                            <Breadcrumb.Item>订单信息管理</Breadcrumb.Item>\r\n                        </Breadcrumb>\r\n                        <Descriptions title=\"订单管理\" className=\"desc\">\r\n                            <Descriptions.Item>展示订单信息，查询订单，查看订单状态，处理订单的发货，确认送达和退款</Descriptions.Item>\r\n                        </Descriptions>\r\n                    </div>\r\n                    <div className=\"status-switch\">\r\n                        <Space>\r\n                            <Button className=\"status-button sendgoods\">待发货</Button>\r\n                            <Button className=\"status-button delivery\">配送中</Button>\r\n                            <Button className=\"status-button success\">已成功</Button>\r\n                            <Button className=\"status-button refund\">退款中</Button>\r\n                            <Button className=\"status-button refunded\">已退款</Button>\r\n                        </Space>\r\n                    </div>\r\n                </div>\r\n                <div className=\"search\">\r\n                    <Divider style={{ margin: 0 }} />\r\n                    <Space style={{ marginTop: 20 }} size={20}>\r\n                        <div>\r\n                            订单id:\r\n                                <InputNumber name='Oid' className=\"Om-input\" ref={elev => { this.idInput = elev }} />\r\n                        </div>\r\n                        <div>\r\n                            用户名称:\r\n                                <Input name=\"commodity\" className=\"Om-input\" ref={elev => { this.nameInput = elev }} />\r\n                        </div>\r\n                        <div>\r\n                            时间:\r\n                                <ConfigProvider locale={zh_CN}>\r\n                                <RangePicker\r\n                                    showTime\r\n                                    format=\"YYYY-MM-DD HH:mm\"\r\n                                    onChange={this.dateOnChange}\r\n                                    ref={elev => { this.dateElev = elev }}\r\n                                />\r\n                            </ConfigProvider>\r\n                        </div>\r\n                        <div style={{ marginLeft: 20 }}>\r\n                            <Button type=\"primary\" shape=\"circle\" icon={<SearchOutlined />} onClick={this.OmSearch} />\r\n                        </div>\r\n                    </Space>\r\n                </div>\r\n                <div className=\"tableWraper contentWraper\">\r\n                    <Table\r\n                        columns={this.columns}\r\n                        dataSource={data}\r\n                        pagination={pagination}\r\n                        loading={loading}\r\n                        onChange={this.handleTableChange}\r\n                        bordered={true}\r\n                        expandable={{\r\n                            expandedRowRender: record => {\r\n                                return <div className=\"sub-order\">\r\n                                    <p>用户收货地址: {record.address} {record.uname} {record.phone} </p>\r\n                                    <p style={{fontWeight:600}}>商品:</p>\r\n                                    {record.commodityDetails.map(item =>{\r\n                                        return <div className=\"commodity-details\" >\r\n                                            <div>编号</div>\r\n                                        </div>\r\n                                    })}\r\n                                </div>\r\n                            },\r\n                        }}\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}