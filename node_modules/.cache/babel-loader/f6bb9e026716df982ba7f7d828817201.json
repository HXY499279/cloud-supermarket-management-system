{"ast":null,"code":"import _classCallCheck from\"D:/code/cloud-supermarket-management-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"D:/code/cloud-supermarket-management-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"D:/code/cloud-supermarket-management-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"D:/code/cloud-supermarket-management-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Descriptions,Divider,Breadcrumb,Popconfirm,Button,List,message,Space,Input,Spin}from'antd';import reqwest from'reqwest';import InfiniteScroll from'react-infinite-scroller';import{nanoid}from'nanoid';import'./index.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Category=/*#__PURE__*/function(_Component){_inherits(Category,_Component);var _super=_createSuper(Category);function Category(){var _this;_classCallCheck(this,Category);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={data:[],loading:false,hasMore:true,total:'',isAddCategory:false,count:0,pageSize:8};_this.fetchData=function(callback){var count=_this.state.count;var pageSize=_this.state.pageSize;count+=1;_this.setState({count:count});var data={count:count,pageSize:pageSize};// console.log(data)\nreqwest({url:'/category/categorylist',method:'post',data:data,type:'json',success:function success(res){callback(res);}});};_this.handleInfiniteOnLoad=function(){var _this$state=_this.state,data=_this$state.data,total=_this$state.total;_this.setState({loading:true});if(data.length>=total){message.warning('分类已展示完毕');_this.setState({hasMore:false,loading:false});return;}_this.fetchData(function(res){data=data.concat(res.results);_this.setState({data:data,loading:false,total:res.total});});};_this.judgeCategoryNameIsExist=function(categoryName){var tag=0;_this.state.data.forEach(function(item){if(item.category===categoryName){tag=1;}});return tag;};_this.addCategory=function(){// console.log(this.categoryInput.state.value)\nvar categoryName=_this.categoryInput.state.value;var pageSize=_this.state.pageSize;if(undefined!==categoryName&&categoryName!==''&&categoryName.search(/\\s/)===-1&&categoryName.search(/[A-z]|[0-9]/)===-1&&categoryName.search(/[@#*（）【】/，:：‘’“”\"\"[\\]{}()-_——+~·^%&',;=?$\\x22]/)===-1){if(_this.judgeCategoryNameIsExist(categoryName)){message.error(\"分类已存在！\");}else{reqwest({url:'/category/addcategory',method:'post',type:'json',data:{categoryName:categoryName,pageSize:pageSize}}).then(function(res){// console.log(res, 1111111111)\n_this.setState({data:res.results});_this.categoryInput.input.value='';_this.categoryInput.state.value='';if(res.status==='success'){message.success(\"新增分类成功！\");}else{message.error(\"新增分类失败！\");}});}}else{message.warning(\"输入内容不能为空或含有空格,字母,数字以及特殊符号！\");}};_this.deleteCategory=function(caid){var count=_this.state.count;var pageSize=_this.state.pageSize;var end=count*pageSize;reqwest({url:'/category/deletecategory',method:'post',type:'json',data:{caid:caid,end:end}}).then(function(res){_this.setState({data:res.results});if(res.status==='success'){message.success(\"删除分类成功！\");}else{message.error(\"删除分类失败！\");}});};_this.AddCategoryIsTrue=function(){_this.setState({isAddCategory:true});};_this.AddCategoryIsFalse=function(){_this.setState({isAddCategory:false});};return _this;}_createClass(Category,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.fetchData(function(res){console.log(res);_this2.setState({data:res.results,total:res.total});});}},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Divider,{style:{margin:0}}),/*#__PURE__*/_jsxs(\"div\",{className:\"descwraper\",children:[/*#__PURE__*/_jsxs(Breadcrumb,{className:\"bdc\",children:[/*#__PURE__*/_jsx(Breadcrumb.Item,{children:/*#__PURE__*/_jsx(\"a\",{href:\"/home\",children:\"\\u4E3B\\u9875\"})}),/*#__PURE__*/_jsx(Breadcrumb.Item,{children:\"\\u5546\\u54C1\\u5206\\u7C7B\\u7BA1\\u7406\"})]}),/*#__PURE__*/_jsx(Descriptions,{title:\"\\u5206\\u7C7B\\u7BA1\\u7406\",className:\"desc\",children:/*#__PURE__*/_jsx(Descriptions.Item,{children:\"\\u5546\\u54C1\\u5206\\u7C7B\\u5C55\\u793A\\uFF0C\\u65B0\\u589E\\u5206\\u7C7B\\uFF0C\\u5220\\u9664\\u5206\\u7C7B\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"search\",children:[/*#__PURE__*/_jsx(Divider,{style:{margin:0}}),/*#__PURE__*/_jsx(Space,{style:{marginTop:20},size:20,children:this.state.isAddCategory?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u5206\\u7C7B\\u540D\\u79F0:\",/*#__PURE__*/_jsx(Input,{name:\"category\",className:\"CimInput\",ref:function ref(elev){_this3.categoryInput=elev;}})]}),/*#__PURE__*/_jsx(Button,{type:\"primary\",style:{borderRadius:5},onClick:this.addCategory,children:\"\\u786E\\u5B9A\"}),/*#__PURE__*/_jsx(Button,{type:\"primary\",danger:true,style:{borderRadius:5},onClick:this.AddCategoryIsFalse,children:\"\\u53D6\\u6D88\"})]}):/*#__PURE__*/_jsx(Button,{type:\"primary\",style:{borderRadius:5},onClick:this.AddCategoryIsTrue,children:\"\\u65B0\\u589E\\u5206\\u7C7B\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"contentWraper\",children:/*#__PURE__*/_jsx(\"div\",{className:\"demo-infinite-container\",children:/*#__PURE__*/_jsx(InfiniteScroll,{initialLoad:false,pageStart:0,loadMore:this.handleInfiniteOnLoad,hasMore:!this.state.loading&&this.state.hasMore,useWindow:false,children:/*#__PURE__*/_jsx(List,{dataSource:this.state.data,renderItem:function renderItem(item){return/*#__PURE__*/_jsxs(List.Item,{children:[/*#__PURE__*/_jsx(List.Item.Meta,{title:item.category,style:{fontSize:20}}),/*#__PURE__*/_jsx(Button,{type:\"primary\",danger:true,style:{borderRadius:5},children:/*#__PURE__*/_jsx(Popconfirm,{title:\"\\u786E\\u5B9A\\u5220\\u9664\\u8BE5\\u5206\\u7C7B\\u5417?\",onConfirm:_this3.deleteCategory.bind(_this3,item.caid),okText:\"\\u786E\\u8BA4\",cancelText:\"\\u53D6\\u6D88\",children:\"\\u5220\\u9664\\u5206\\u7C7B\"})})]},nanoid());},children:this.state.loading&&this.state.hasMore&&/*#__PURE__*/_jsx(\"div\",{className:\"demo-loading-container\",children:/*#__PURE__*/_jsx(Spin,{})})})})})})]});}}]);return Category;}(Component);export{Category as default};","map":{"version":3,"sources":["D:/code/cloud-supermarket-management-system/src/components/Content/Category/Category.jsx"],"names":["React","Component","Descriptions","Divider","Breadcrumb","Popconfirm","Button","List","message","Space","Input","Spin","reqwest","InfiniteScroll","nanoid","Category","state","data","loading","hasMore","total","isAddCategory","count","pageSize","fetchData","callback","setState","url","method","type","success","res","handleInfiniteOnLoad","length","warning","concat","results","judgeCategoryNameIsExist","categoryName","tag","forEach","item","category","addCategory","categoryInput","value","undefined","search","error","then","input","status","deleteCategory","caid","end","AddCategoryIsTrue","AddCategoryIsFalse","console","log","margin","marginTop","elev","borderRadius","fontSize","bind"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { Descriptions, Divider, Breadcrumb, Popconfirm, Button, List, message, Space, Input, Spin } from 'antd';\r\nimport reqwest from 'reqwest';\r\nimport InfiniteScroll from 'react-infinite-scroller';\r\nimport { nanoid } from 'nanoid'\r\nimport './index.css'\r\n\r\nexport default class Category extends Component {\r\n\r\n    state = {\r\n        data: [],\r\n        loading: false,\r\n        hasMore: true,\r\n        total: '',\r\n        isAddCategory: false,\r\n        count: 0,\r\n        pageSize: 8\r\n    };\r\n\r\n    fetchData = callback => {\r\n        let count = this.state.count\r\n        let pageSize = this.state.pageSize\r\n        count += 1\r\n        this.setState({\r\n            count: count\r\n        })\r\n        let data = { count, pageSize }\r\n        // console.log(data)\r\n        reqwest({\r\n            url: '/category/categorylist',\r\n            method: 'post',\r\n            data: data,\r\n            type: 'json',\r\n            success: res => {\r\n                callback(res);\r\n            },\r\n        });\r\n    };\r\n\r\n    handleInfiniteOnLoad = () => {\r\n        let { data, total } = this.state;\r\n        this.setState({\r\n            loading: true,\r\n        });\r\n        if (data.length >= total) {\r\n            message.warning('分类已展示完毕');\r\n            this.setState({\r\n                hasMore: false,\r\n                loading: false,\r\n            });\r\n            return;\r\n        }\r\n        this.fetchData(res => {\r\n            data = data.concat(res.results);\r\n            this.setState({\r\n                data,\r\n                loading: false,\r\n                total: res.total\r\n            });\r\n        });\r\n    };\r\n\r\n    // 判断新加的分类是否已存在\r\n    judgeCategoryNameIsExist = (categoryName) => {\r\n        let tag = 0\r\n        this.state.data.forEach(item => {\r\n            if (item.category === categoryName) {\r\n                tag = 1\r\n            }\r\n        })\r\n        return tag\r\n    }\r\n\r\n    addCategory = () => {\r\n        // console.log(this.categoryInput.state.value)\r\n        let categoryName = this.categoryInput.state.value\r\n        let pageSize = this.state.pageSize\r\n        if (\r\n            undefined !== categoryName &&\r\n            categoryName !== '' &&\r\n            categoryName.search(/\\s/) === -1 &&\r\n            categoryName.search(/[A-z]|[0-9]/) === -1 &&\r\n            categoryName.search(/[@#*（）【】/，:：‘’“”\"\"[\\]{}()-_——+~·^%&',;=?$\\x22]/) === -1\r\n        ) {\r\n            if (this.judgeCategoryNameIsExist(categoryName)) {\r\n                message.error(\"分类已存在！\")\r\n            } else {\r\n                reqwest({\r\n                    url: '/category/addcategory',\r\n                    method: 'post',\r\n                    type: 'json',\r\n                    data: { categoryName, pageSize },\r\n                })\r\n                    .then(res => {\r\n                        // console.log(res, 1111111111)\r\n                        this.setState({\r\n                            data: res.results\r\n                        })\r\n                        this.categoryInput.input.value = ''\r\n                        this.categoryInput.state.value = ''\r\n                        if (res.status === 'success') {\r\n                            message.success(\"新增分类成功！\")\r\n                        } else {\r\n                            message.error(\"新增分类失败！\")\r\n                        }\r\n                    })\r\n            }\r\n        } else {\r\n            message.warning(\"输入内容不能为空或含有空格,字母,数字以及特殊符号！\")\r\n\r\n        }\r\n    }\r\n\r\n    deleteCategory = (caid) => {\r\n        let count = this.state.count\r\n        let pageSize = this.state.pageSize\r\n        let end = count * pageSize\r\n        reqwest({\r\n            url: '/category/deletecategory',\r\n            method: 'post',\r\n            type: 'json',\r\n            data: { caid, end },\r\n        })\r\n            .then((res) => {\r\n                this.setState({\r\n                    data: res.results\r\n                })\r\n                if (res.status === 'success') {\r\n                    message.success(\"删除分类成功！\")\r\n                } else {\r\n                    message.error(\"删除分类失败！\")\r\n                }\r\n            })\r\n    }\r\n\r\n    AddCategoryIsTrue = () => {\r\n        this.setState({\r\n            isAddCategory: true\r\n        })\r\n    }\r\n\r\n    AddCategoryIsFalse = () => {\r\n        this.setState({\r\n            isAddCategory: false\r\n        })\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.fetchData(res => {\r\n            console.log(res)\r\n            this.setState({\r\n                data: res.results,\r\n                total: res.total\r\n            });\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <Divider style={{ margin: 0 }} />\r\n                <div className=\"descwraper\">\r\n                    <Breadcrumb className=\"bdc\">\r\n                        <Breadcrumb.Item>\r\n                            <a href=\"/home\">主页</a>\r\n                        </Breadcrumb.Item>\r\n                        <Breadcrumb.Item>商品分类管理</Breadcrumb.Item>\r\n                    </Breadcrumb>\r\n                    <Descriptions title=\"分类管理\" className=\"desc\">\r\n                        <Descriptions.Item>商品分类展示，新增分类，删除分类</Descriptions.Item>\r\n                    </Descriptions>\r\n                </div>\r\n                <div className=\"search\">\r\n                    <Divider style={{ margin: 0 }} />\r\n                    <Space style={{ marginTop: 20 }} size={20}>\r\n\r\n                        {\r\n                            (this.state.isAddCategory)\r\n                                ?\r\n                                <>\r\n                                    <div>\r\n                                        分类名称:\r\n                                        <Input name='category' className=\"CimInput\" ref={elev => { this.categoryInput = elev }} />\r\n                                    </div>\r\n                                    <Button\r\n                                        type=\"primary\"\r\n                                        style={{ borderRadius: 5 }}\r\n                                        onClick={this.addCategory}\r\n                                    >\r\n                                        确定\r\n                                    </Button>\r\n                                    <Button\r\n                                        type=\"primary\"\r\n                                        danger\r\n                                        style={{ borderRadius: 5 }}\r\n                                        onClick={this.AddCategoryIsFalse}\r\n                                    >\r\n                                        取消\r\n                                    </Button>\r\n                                </>\r\n                                :\r\n                                <Button\r\n                                    type=\"primary\"\r\n                                    style={{ borderRadius: 5 }}\r\n                                    onClick={this.AddCategoryIsTrue}\r\n                                >\r\n                                    新增分类\r\n                                </Button>\r\n\r\n                        }\r\n                    </Space>\r\n                </div>\r\n                <div className=\"contentWraper\">\r\n                    <div className=\"demo-infinite-container\">\r\n                        <InfiniteScroll\r\n                            initialLoad={false}\r\n                            pageStart={0}\r\n                            loadMore={this.handleInfiniteOnLoad}\r\n                            hasMore={!this.state.loading && this.state.hasMore}\r\n                            useWindow={false}\r\n                        >\r\n                            <List\r\n                                dataSource={this.state.data}\r\n                                renderItem={item => (\r\n                                    <List.Item key={nanoid()}>\r\n                                        <List.Item.Meta\r\n                                            title={item.category}\r\n                                            style={{ fontSize: 20 }}\r\n                                        />\r\n                                        <Button\r\n                                            type=\"primary\"\r\n                                            danger\r\n                                            style={{ borderRadius: 5 }}\r\n                                        >\r\n                                            <Popconfirm\r\n                                                title=\"确定删除该分类吗?\"\r\n                                                onConfirm={this.deleteCategory.bind(this, item.caid)}\r\n                                                okText=\"确认\"\r\n                                                cancelText=\"取消\"\r\n                                            >\r\n                                                删除分类\r\n                                            </Popconfirm>\r\n                                        </Button>\r\n                                    </List.Item>\r\n                                )}\r\n                            >\r\n                                {this.state.loading && this.state.hasMore && (\r\n                                    <div className=\"demo-loading-container\">\r\n                                        <Spin />\r\n                                    </div>\r\n                                )}\r\n                            </List>\r\n                        </InfiniteScroll>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}