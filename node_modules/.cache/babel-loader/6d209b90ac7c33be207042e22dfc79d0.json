{"ast":null,"code":"import { __assign, __extends } from \"tslib\";\nimport GroupComponent from '../abstract/group-component';\nimport { regionToBBox } from '../util/util';\n\nvar ImageAnnotation =\n/** @class */\nfunction (_super) {\n  __extends(ImageAnnotation, _super);\n\n  function ImageAnnotation() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  /**\n   * @protected\n   * 默认的配置项\n   * @returns {object} 默认的配置项\n   */\n\n\n  ImageAnnotation.prototype.getDefaultCfg = function () {\n    var cfg = _super.prototype.getDefaultCfg.call(this);\n\n    return __assign(__assign({}, cfg), {\n      name: 'annotation',\n      type: 'image',\n      locationType: 'region',\n      start: null,\n      end: null,\n      src: null,\n      style: {}\n    });\n  };\n\n  ImageAnnotation.prototype.renderInner = function (group) {\n    this.renderImage(group);\n  };\n\n  ImageAnnotation.prototype.getImageAttrs = function () {\n    var start = this.get('start');\n    var end = this.get('end');\n    var style = this.get('style');\n    var bbox = regionToBBox({\n      start: start,\n      end: end\n    });\n    var src = this.get('src');\n    return __assign({\n      x: bbox.x,\n      y: bbox.y,\n      img: src,\n      width: bbox.width,\n      height: bbox.height\n    }, style);\n  }; // 绘制图片\n\n\n  ImageAnnotation.prototype.renderImage = function (group) {\n    this.addShape(group, {\n      type: 'image',\n      id: this.getElementId('image'),\n      name: 'annotation-image',\n      attrs: this.getImageAttrs()\n    });\n  };\n\n  return ImageAnnotation;\n}(GroupComponent);\n\nexport default ImageAnnotation;","map":{"version":3,"sources":["../../src/annotation/image.ts"],"names":[],"mappings":";AACA,OAAO,cAAP,MAA2B,6BAA3B;AAGA,SAAS,YAAT,QAA6B,cAA7B;;AAEA,IAAA,eAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAA8B,EAAA,SAAA,CAAA,eAAA,EAAA,MAAA,CAAA;;AAA9B,WAAA,eAAA,GAAA;;AAiDC;AAhDC;;;;AAIG;;;AACI,EAAA,eAAA,CAAA,SAAA,CAAA,aAAA,GAAP,YAAA;AACE,QAAM,GAAG,GAAG,MAAA,CAAA,SAAA,CAAM,aAAN,CAAmB,IAAnB,CAAmB,IAAnB,CAAZ;;AACA,WAAA,QAAA,CAAA,QAAA,CAAA,EAAA,EACK,GADL,CAAA,EACQ;AACN,MAAA,IAAI,EAAE,YADA;AAEN,MAAA,IAAI,EAAE,OAFA;AAGN,MAAA,YAAY,EAAE,QAHR;AAIN,MAAA,KAAK,EAAE,IAJD;AAKN,MAAA,GAAG,EAAE,IALC;AAMN,MAAA,GAAG,EAAE,IANC;AAON,MAAA,KAAK,EAAE;AAPD,KADR,CAAA;AAUD,GAZM;;AAcA,EAAA,eAAA,CAAA,SAAA,CAAA,WAAA,GAAP,UAAmB,KAAnB,EAAgC;AAC9B,SAAK,WAAL,CAAiB,KAAjB;AACD,GAFM;;AAIC,EAAA,eAAA,CAAA,SAAA,CAAA,aAAA,GAAR,YAAA;AACE,QAAM,KAAK,GAAG,KAAK,GAAL,CAAS,OAAT,CAAd;AACA,QAAM,GAAG,GAAG,KAAK,GAAL,CAAS,KAAT,CAAZ;AACA,QAAM,KAAK,GAAG,KAAK,GAAL,CAAS,OAAT,CAAd;AACA,QAAM,IAAI,GAAG,YAAY,CAAC;AAAE,MAAA,KAAK,EAAA,KAAP;AAAS,MAAA,GAAG,EAAA;AAAZ,KAAD,CAAzB;AACA,QAAM,GAAG,GAAG,KAAK,GAAL,CAAS,KAAT,CAAZ;AACA,WAAA,QAAA,CAAA;AACE,MAAA,CAAC,EAAE,IAAI,CAAC,CADV;AAEE,MAAA,CAAC,EAAE,IAAI,CAAC,CAFV;AAGE,MAAA,GAAG,EAAE,GAHP;AAIE,MAAA,KAAK,EAAE,IAAI,CAAC,KAJd;AAKE,MAAA,MAAM,EAAE,IAAI,CAAC;AALf,KAAA,EAMK,KANL,CAAA;AAQD,GAdO,CAxBV,CAwCE;;;AACQ,EAAA,eAAA,CAAA,SAAA,CAAA,WAAA,GAAR,UAAoB,KAApB,EAAiC;AAC/B,SAAK,QAAL,CAAc,KAAd,EAAqB;AACnB,MAAA,IAAI,EAAE,OADa;AAEnB,MAAA,EAAE,EAAE,KAAK,YAAL,CAAkB,OAAlB,CAFe;AAGnB,MAAA,IAAI,EAAE,kBAHa;AAInB,MAAA,KAAK,EAAE,KAAK,aAAL;AAJY,KAArB;AAMD,GAPO;;AAQV,SAAA,eAAA;AAAC,CAjDD,CAA8B,cAA9B,CAAA;;AAmDA,eAAe,eAAf","sourceRoot":"","sourcesContent":["import { __assign, __extends } from \"tslib\";\nimport GroupComponent from '../abstract/group-component';\nimport { regionToBBox } from '../util/util';\nvar ImageAnnotation = /** @class */ (function (_super) {\n    __extends(ImageAnnotation, _super);\n    function ImageAnnotation() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * @protected\n     * 默认的配置项\n     * @returns {object} 默认的配置项\n     */\n    ImageAnnotation.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { name: 'annotation', type: 'image', locationType: 'region', start: null, end: null, src: null, style: {} });\n    };\n    ImageAnnotation.prototype.renderInner = function (group) {\n        this.renderImage(group);\n    };\n    ImageAnnotation.prototype.getImageAttrs = function () {\n        var start = this.get('start');\n        var end = this.get('end');\n        var style = this.get('style');\n        var bbox = regionToBBox({ start: start, end: end });\n        var src = this.get('src');\n        return __assign({ x: bbox.x, y: bbox.y, img: src, width: bbox.width, height: bbox.height }, style);\n    };\n    // 绘制图片\n    ImageAnnotation.prototype.renderImage = function (group) {\n        this.addShape(group, {\n            type: 'image',\n            id: this.getElementId('image'),\n            name: 'annotation-image',\n            attrs: this.getImageAttrs(),\n        });\n    };\n    return ImageAnnotation;\n}(GroupComponent));\nexport default ImageAnnotation;\n//# sourceMappingURL=image.js.map"]},"metadata":{},"sourceType":"module"}