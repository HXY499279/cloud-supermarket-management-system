{"ast":null,"code":"import { __assign, __extends } from \"tslib\";\nimport GroupComponent from '../abstract/group-component';\nimport { renderTag } from '../util/graphic';\nimport { applyRotate, applyTranslate } from '../util/matrix';\nimport Theme from '../util/theme';\n\nvar TextAnnotation =\n/** @class */\nfunction (_super) {\n  __extends(TextAnnotation, _super);\n\n  function TextAnnotation() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  /**\n   * @protected\n   * 默认的配置项\n   * @returns {object} 默认的配置项\n   */\n\n\n  TextAnnotation.prototype.getDefaultCfg = function () {\n    var cfg = _super.prototype.getDefaultCfg.call(this);\n\n    return __assign(__assign({}, cfg), {\n      name: 'annotation',\n      type: 'text',\n      locationType: 'point',\n      x: 0,\n      y: 0,\n      content: '',\n      rotate: null,\n      style: {},\n      background: null,\n      maxLength: null,\n      autoEllipsis: true,\n      isVertical: false,\n      ellipsisPosition: 'tail',\n      defaultCfg: {\n        style: {\n          fill: Theme.textColor,\n          fontSize: 12,\n          textAlign: 'center',\n          textBaseline: 'middle',\n          fontFamily: Theme.fontFamily\n        }\n      }\n    });\n  }; // 复写 setLocation 方法，不需要重新创建 text\n\n\n  TextAnnotation.prototype.setLocation = function (location) {\n    this.set('x', location.x);\n    this.set('y', location.y);\n    this.resetLocation();\n  };\n\n  TextAnnotation.prototype.renderInner = function (group) {\n    var _a = this.getLocation(),\n        x = _a.x,\n        y = _a.y;\n\n    var content = this.get('content');\n    var style = this.get('style');\n    var id = this.getElementId('text');\n    var name = this.get('name') + \"-text\";\n    var maxLength = this.get('maxLength');\n    var autoEllipsis = this.get('autoEllipsis');\n    var isVertical = this.get('isVertical');\n    var ellipsisPosition = this.get('ellipsisPosition');\n    var background = this.get('background');\n    var rotate = this.get('rotate');\n    var cfg = {\n      id: id,\n      name: name,\n      x: x,\n      y: y,\n      content: content,\n      style: style,\n      maxLength: maxLength,\n      autoEllipsis: autoEllipsis,\n      isVertical: isVertical,\n      ellipsisPosition: ellipsisPosition,\n      background: background,\n      rotate: rotate\n    };\n    renderTag(group, cfg);\n  };\n\n  TextAnnotation.prototype.resetLocation = function () {\n    var textGroup = this.getElementByLocalId('text-group');\n\n    if (textGroup) {\n      var _a = this.getLocation(),\n          x = _a.x,\n          y = _a.y;\n\n      var rotate = this.get('rotate');\n      applyTranslate(textGroup, x, y);\n      applyRotate(textGroup, rotate, x, y);\n    }\n  };\n\n  return TextAnnotation;\n}(GroupComponent);\n\nexport default TextAnnotation;","map":{"version":3,"sources":["../../src/annotation/text.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import { __assign, __extends } from \"tslib\";\nimport GroupComponent from '../abstract/group-component';\nimport { renderTag } from '../util/graphic';\nimport { applyRotate, applyTranslate } from '../util/matrix';\nimport Theme from '../util/theme';\nvar TextAnnotation = /** @class */ (function (_super) {\n    __extends(TextAnnotation, _super);\n    function TextAnnotation() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * @protected\n     * 默认的配置项\n     * @returns {object} 默认的配置项\n     */\n    TextAnnotation.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { name: 'annotation', type: 'text', locationType: 'point', x: 0, y: 0, content: '', rotate: null, style: {}, background: null, maxLength: null, autoEllipsis: true, isVertical: false, ellipsisPosition: 'tail', defaultCfg: {\n                style: {\n                    fill: Theme.textColor,\n                    fontSize: 12,\n                    textAlign: 'center',\n                    textBaseline: 'middle',\n                    fontFamily: Theme.fontFamily,\n                },\n            } });\n    };\n    // 复写 setLocation 方法，不需要重新创建 text\n    TextAnnotation.prototype.setLocation = function (location) {\n        this.set('x', location.x);\n        this.set('y', location.y);\n        this.resetLocation();\n    };\n    TextAnnotation.prototype.renderInner = function (group) {\n        var _a = this.getLocation(), x = _a.x, y = _a.y;\n        var content = this.get('content');\n        var style = this.get('style');\n        var id = this.getElementId('text');\n        var name = this.get('name') + \"-text\";\n        var maxLength = this.get('maxLength');\n        var autoEllipsis = this.get('autoEllipsis');\n        var isVertical = this.get('isVertical');\n        var ellipsisPosition = this.get('ellipsisPosition');\n        var background = this.get('background');\n        var rotate = this.get('rotate');\n        var cfg = {\n            id: id,\n            name: name,\n            x: x,\n            y: y,\n            content: content,\n            style: style,\n            maxLength: maxLength,\n            autoEllipsis: autoEllipsis,\n            isVertical: isVertical,\n            ellipsisPosition: ellipsisPosition,\n            background: background,\n            rotate: rotate,\n        };\n        renderTag(group, cfg);\n    };\n    TextAnnotation.prototype.resetLocation = function () {\n        var textGroup = this.getElementByLocalId('text-group');\n        if (textGroup) {\n            var _a = this.getLocation(), x = _a.x, y = _a.y;\n            var rotate = this.get('rotate');\n            applyTranslate(textGroup, x, y);\n            applyRotate(textGroup, rotate, x, y);\n        }\n    };\n    return TextAnnotation;\n}(GroupComponent));\nexport default TextAnnotation;\n//# sourceMappingURL=text.js.map"]},"metadata":{},"sourceType":"module"}