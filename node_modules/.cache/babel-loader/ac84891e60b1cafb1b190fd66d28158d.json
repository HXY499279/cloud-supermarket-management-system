{"ast":null,"code":"import _classCallCheck from\"D:/code/cloud-supermarket-management-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"D:/code/cloud-supermarket-management-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"D:/code/cloud-supermarket-management-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"D:/code/cloud-supermarket-management-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Card,Divider,Input,Popconfirm,Button,message,Image}from'antd';import{EditOutlined,CloseOutlined}from'@ant-design/icons';import reqwest from'reqwest';import'./index.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CommodityCard=/*#__PURE__*/function(_Component){_inherits(CommodityCard,_Component);var _super=_createSuper(CommodityCard);function CommodityCard(){var _this;_classCallCheck(this,CommodityCard);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={data:{},isEdit:false};_this.edit=function(){_this.setState({isEdit:true});};_this.delete=function(cid){console.log(typeof cid);_this.props.renderCommodityList(cid);};_this.comfimEdit=function(){var _ref=[_this.state.data.cid,_this.currentPriceElev.state.value,_this.inventoryElev.state.value,_this.originalPriceElev.state.value],cid=_ref[0],currentPrice=_ref[1],inventory=_ref[2],originalPrice=_ref[3];var newData={cid:cid,currentPrice:currentPrice,inventory:inventory,originalPrice:originalPrice};console.log(_this.state.data);console.log(newData);reqwest({url:'/editcommodity',method:'post',type:'json',data:newData}).then(function(res){if(res.status===\"success\"){message.success(\"更改成功！\");console.log(_this.state.data);var oldData=_this.state.data;var _ref2=[newData.currentPrice,newData.inventory,newData.originalPrice];oldData.currentPrice=_ref2[0];oldData.inventory=_ref2[1];oldData.originalPrice=_ref2[2];_this.setState({data:oldData,isEdit:false});}else{message.error(\"更改失败！\");var _oldData=_this.state.data;_this.setState({data:_oldData,isEdit:false});}});};_this.propertyEdit=function(keyword){var item=_this.state.data;var isEdit=_this.state.isEdit;return isEdit?/*#__PURE__*/_jsx(Input,{className:\"editInput\",defaultValue:item[keyword],onChange:_this[\"\".concat(keyword,\"Change\")],ref:function ref(elev){_this[\"\".concat(keyword,\"Elev\")]=elev;}}):item[keyword];};_this.componentDidMount=function(){_this.setState({data:_this.props.data});};return _this;}_createClass(CommodityCard,[{key:\"render\",value:function render(){var item=this.state.data;if(item.src===undefined){// console.log(item)\n}var isEdit=this.state.isEdit;return/*#__PURE__*/_jsxs(Card,{style:{width:307,height:375,margin:'0 auto'},cover:/*#__PURE__*/_jsx(Image,{alt:\"\\u56FE\\u7247\\u51FA\\u9519\",src:item.src,height:186,width:307,preview:false}),actions:[isEdit?/*#__PURE__*/_jsx(Button,{type:\"primary\",size:\"small\",style:{borderRadius:5},onClick:this.comfimEdit,children:\"\\u786E\\u8BA4\"}):/*#__PURE__*/_jsx(EditOutlined,{onClick:this.edit},\"edit\"),/*#__PURE__*/_jsx(Popconfirm,{title:\"\\u786E\\u5B9A\\u5220\\u9664\\u8BE5\\u5546\\u54C1\\u5417?\",onConfirm:this.delete.bind(this,item.cid),okText:\"\\u786E\\u8BA4\",cancelText:\"\\u53D6\\u6D88\",children:/*#__PURE__*/_jsx(CloseOutlined,{},\"ellipsis\")})]// loading={true}\n,children:[/*#__PURE__*/_jsx(\"p\",{style:{margin:'10PX 0 0 0 ',fontWeight:900,fontSize:18,textAlign:'center'},children:item.commodityName}),/*#__PURE__*/_jsxs(\"div\",{className:\"detailWraper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"detail\",children:[\"\\u7F16\\u53F7: \",item.cid]}),/*#__PURE__*/_jsx(Divider,{style:{margin:0}}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail\",children:[\"\\u73B0\\u4EF7: \",this.propertyEdit('currentPrice'),\"\\u5143\"]}),/*#__PURE__*/_jsx(Divider,{style:{margin:0}}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail\",children:[\"\\u8FDB\\u8D27\\u91CF: \",this.propertyEdit('inventory'),\"\\u4EF6 \"]}),/*#__PURE__*/_jsx(Divider,{style:{margin:0}}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail\",children:[\"\\u89C4\\u683C: \",item.weight,\"g \"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detailWraper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"detail\",title:item.category,children:[\"\\u5206\\u7C7B: \",item.category,\" \"]}),/*#__PURE__*/_jsx(Divider,{style:{margin:0}}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail\",children:[\"\\u539F\\u4EF7: \",this.propertyEdit('originalPrice'),\"\\u5143 \"]}),/*#__PURE__*/_jsx(Divider,{style:{margin:0}}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail\",children:[\"\\u9500\\u91CF: \",item.salesVolume,\"\\u4EF6 \"]}),/*#__PURE__*/_jsx(Divider,{style:{margin:0}}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail\",title:item.originalPlace,children:[\"\\u4EA7\\u5730: \",item.originalPlace,\" \"]})]})]});}}]);return CommodityCard;}(Component);export{CommodityCard as default};","map":{"version":3,"sources":["D:/code/cloud-supermarket-management-system/src/utils/CimCommodityCard/CommodityCard.jsx"],"names":["React","Component","Card","Divider","Input","Popconfirm","Button","message","Image","EditOutlined","CloseOutlined","reqwest","CommodityCard","state","data","isEdit","edit","setState","delete","cid","console","log","props","renderCommodityList","comfimEdit","currentPriceElev","value","inventoryElev","originalPriceElev","currentPrice","inventory","originalPrice","newData","url","method","type","then","res","status","success","oldData","error","propertyEdit","keyword","item","elev","componentDidMount","src","undefined","width","height","margin","borderRadius","bind","fontWeight","fontSize","textAlign","commodityName","weight","category","salesVolume","originalPlace"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { Card, Divider, Input, Popconfirm, Button, message, Image } from 'antd';\r\nimport { EditOutlined, CloseOutlined } from '@ant-design/icons';\r\nimport reqwest from 'reqwest';\r\nimport './index.css'\r\n\r\nexport default class CommodityCard extends Component {\r\n    state = {\r\n        data: {},\r\n        isEdit: false\r\n    }\r\n\r\n    edit = () => {\r\n        this.setState({\r\n            isEdit: true\r\n        })\r\n\r\n    }\r\n    // 删除商品操作\r\n    delete = (cid) => {\r\n        console.log(typeof cid)\r\n        this.props.renderCommodityList(cid)\r\n    }\r\n    // 确认编辑操作,发送表单请求到后端\r\n    comfimEdit = () => {\r\n        const [\r\n            cid,\r\n            currentPrice,\r\n            inventory,\r\n            originalPrice,\r\n        ] = [\r\n                this.state.data.cid,\r\n                this.currentPriceElev.state.value,\r\n                this.inventoryElev.state.value,\r\n                this.originalPriceElev.state.value,\r\n            ]\r\n        const newData = {\r\n            cid,\r\n            currentPrice,\r\n            inventory,\r\n            originalPrice,\r\n        }\r\n        console.log(this.state.data)\r\n        console.log(newData)\r\n        reqwest({\r\n            url: '/editcommodity',\r\n            method: 'post',\r\n            type: 'json',\r\n            data: newData\r\n        })\r\n            .then(res => {\r\n                if (res.status === \"success\") {\r\n                    message.success(\"更改成功！\")\r\n                    console.log(this.state.data)\r\n                    let oldData = this.state.data;\r\n                    [\r\n                        oldData.currentPrice,\r\n                        oldData.inventory,\r\n                        oldData.originalPrice,\r\n                    ] = [\r\n                            newData.currentPrice,\r\n                            newData.inventory,\r\n                            newData.originalPrice,\r\n                        ]\r\n                    this.setState({\r\n                        data: oldData,\r\n                        isEdit: false\r\n                    })\r\n                } else {\r\n                    message.error(\"更改失败！\")\r\n                    let oldData = this.state.data;\r\n                    this.setState({\r\n                        data: oldData,\r\n                        isEdit: false\r\n                    })\r\n                }\r\n            })\r\n    }\r\n    // 属性函数化\r\n    propertyEdit = (keyword) => {\r\n        const item = this.state.data\r\n        const isEdit = this.state.isEdit\r\n        return (isEdit)\r\n            ?\r\n            <Input className='editInput' defaultValue={item[keyword]} onChange={this[`${keyword}Change`]} ref={elev => { this[`${keyword}Elev`] = elev }} />\r\n            :\r\n            item[keyword]\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        this.setState({\r\n            data: this.props.data\r\n        })\r\n    }\r\n\r\n    render() {\r\n        const item = this.state.data\r\n        if (item.src === undefined ) {\r\n            // console.log(item)\r\n        }\r\n        const isEdit = this.state.isEdit\r\n        return (\r\n            <Card\r\n                style={{ width: 307, height: 375, margin: '0 auto' }}\r\n                cover={\r\n                    <Image\r\n                        alt=\"图片出错\"\r\n                        src={item.src}\r\n                        height={186}\r\n                        width={307}\r\n                        preview={false}\r\n                    />\r\n                }\r\n                actions={[\r\n                    (isEdit)\r\n                        ?\r\n                        <Button type='primary' size=\"small\" style={{ borderRadius: 5 }} onClick={this.comfimEdit}>确认</Button>\r\n                        :\r\n                        <EditOutlined key=\"edit\" onClick={this.edit} />,\r\n                    <Popconfirm\r\n                        title=\"确定删除该商品吗?\"\r\n                        onConfirm={this.delete.bind(this, item.cid)}\r\n                        okText=\"确认\"\r\n                        cancelText=\"取消\"\r\n                    >\r\n                        <CloseOutlined key=\"ellipsis\" />\r\n                    </Popconfirm>\r\n                ]}\r\n            // loading={true}\r\n            >\r\n                <p style={{ margin: '10PX 0 0 0 ', fontWeight: 900, fontSize: 18, textAlign: 'center' }}>{item.commodityName}</p>\r\n                <div className='detailWraper'>\r\n                    <div className='detail'>编号: {item.cid}\r\n                    </div>\r\n                    <Divider style={{ margin: 0 }} />\r\n                    <div className='detail'>现价: {this.propertyEdit('currentPrice')}元</div>\r\n                    <Divider style={{ margin: 0 }} />\r\n                    <div className='detail'>进货量: {this.propertyEdit('inventory')}件 </div>\r\n                    <Divider style={{ margin: 0 }} />\r\n                    <div className='detail'>规格: {item.weight}g </div>\r\n                </div>\r\n                <div className='detailWraper'>\r\n                    <div className='detail' title={item.category}>分类: {item.category} </div>\r\n                    <Divider style={{ margin: 0 }} />\r\n                    <div className='detail'>原价: {this.propertyEdit('originalPrice')}元 </div>\r\n                    <Divider style={{ margin: 0 }} />\r\n                    <div className='detail'>销量: {item.salesVolume}件 </div>\r\n                    <Divider style={{ margin: 0 }} />\r\n                    <div className='detail' title={item.originalPlace}>产地: {item.originalPlace} </div>\r\n                </div>\r\n            </Card>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}