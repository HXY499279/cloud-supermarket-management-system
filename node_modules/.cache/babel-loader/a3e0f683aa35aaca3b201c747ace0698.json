{"ast":null,"code":"import { __extends } from \"tslib\";\nimport { FIELD_ORIGIN } from '../constant';\nimport Path from './path';\nimport './shape/area';\n/**\n * Area 几何标记类。\n * 常用于绘制面积图。\n */\n\nvar Area =\n/** @class */\nfunction (_super) {\n  __extends(Area, _super);\n\n  function Area(cfg) {\n    var _this = _super.call(this, cfg) || this;\n\n    _this.type = 'area';\n    _this.shapeType = 'area';\n    /** 生成图形关键点 */\n\n    _this.generatePoints = true;\n    /**\n     * 面积图是否从 0 基准线开始填充。\n     * 1. 默认值为 `true`，表现如下：\n     * ![image](https://gw.alipayobjects.com/zos/rmsportal/ZQqwUCczalrKqGgagOVp.png)\n     * 2. 当值为 `false` 时，表现如下：\n     * ![image](https://gw.alipayobjects.com/zos/rmsportal/yPswkaXvUpCYOdhocGwB.png)\n     */\n\n    _this.startOnZero = true;\n    var _a = cfg.startOnZero,\n        startOnZero = _a === void 0 ? true : _a,\n        _b = cfg.sortable,\n        sortable = _b === void 0 ? false : _b,\n        _c = cfg.showSinglePoint,\n        showSinglePoint = _c === void 0 ? false : _c;\n    _this.startOnZero = startOnZero; // 默认为 true\n\n    _this.sortable = sortable; // 关闭默认的 X 轴数据排序\n\n    _this.showSinglePoint = showSinglePoint;\n    return _this;\n  }\n  /**\n   * 获取图形绘制的关键点以及数据\n   * @param mappingData 映射后的数据\n   */\n\n\n  Area.prototype.getPointsAndData = function (mappingData) {\n    var points = [];\n    var data = [];\n\n    for (var i = 0, len = mappingData.length; i < len; i++) {\n      var obj = mappingData[i];\n      points.push(obj.points);\n      data.push(obj[FIELD_ORIGIN]);\n    }\n\n    return {\n      points: points,\n      data: data\n    };\n  };\n  /**\n   * 获取 Y 轴上的最小值\n   * @returns y 字段最小值\n   */\n\n\n  Area.prototype.getYMinValue = function () {\n    if (this.startOnZero) {\n      return _super.prototype.getYMinValue.call(this);\n    }\n\n    var yScale = this.getYScale();\n    return yScale.min;\n  };\n\n  return Area;\n}(Path);\n\nexport default Area;","map":{"version":3,"sources":["../../src/geometry/area.ts"],"names":[],"mappings":";AAAA,SAAS,YAAT,QAA6B,aAA7B;AAEA,OAAO,IAAP,MAA8B,QAA9B;AACA,OAAO,cAAP;AAcA;;;AAGG;;AACH,IAAA,IAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAAkC,EAAA,SAAA,CAAA,IAAA,EAAA,MAAA,CAAA;;AAchC,WAAA,IAAA,CAAY,GAAZ,EAAwB;AAAxB,QAAA,KAAA,GACE,MAAA,CAAA,IAAA,CAAA,IAAA,EAAM,GAAN,KAAU,IADZ;;AAbgB,IAAA,KAAA,CAAA,IAAA,GAAe,MAAf;AACA,IAAA,KAAA,CAAA,SAAA,GAAoB,MAApB;AAChB;;AACgB,IAAA,KAAA,CAAA,cAAA,GAA0B,IAA1B;AAChB;;;;;;AAMG;;AACa,IAAA,KAAA,CAAA,WAAA,GAAuB,IAAvB;AAKN,QAAA,EAAA,GAAkE,GAAG,CAAnD,WAAlB;AAAA,QAAA,WAAW,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,IAAH,GAAO,EAAlB;AAAA,QAAoB,EAAA,GAA8C,GAAG,CAAjC,QAApC;AAAA,QAAoB,QAAQ,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,KAAH,GAAQ,EAApC;AAAA,QAAsC,EAAA,GAA4B,GAAG,CAAR,eAA7D;AAAA,QAAsC,eAAe,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,KAAH,GAAQ,EAA7D;AACR,IAAA,KAAI,CAAC,WAAL,GAAmB,WAAnB,CAJsB,CAIU;;AAChC,IAAA,KAAI,CAAC,QAAL,GAAgB,QAAhB,CALsB,CAKI;;AAC1B,IAAA,KAAI,CAAC,eAAL,GAAuB,eAAvB;;AACD;AAED;;;AAGG;;;AACO,EAAA,IAAA,CAAA,SAAA,CAAA,gBAAA,GAAV,UAA2B,WAA3B,EAAsD;AACpD,QAAM,MAAM,GAAG,EAAf;AACA,QAAM,IAAI,GAAG,EAAb;;AAEA,SAAK,IAAI,CAAC,GAAG,CAAR,EAAW,GAAG,GAAG,WAAW,CAAC,MAAlC,EAA0C,CAAC,GAAG,GAA9C,EAAmD,CAAC,EAApD,EAAwD;AACtD,UAAM,GAAG,GAAG,WAAW,CAAC,CAAD,CAAvB;AACA,MAAA,MAAM,CAAC,IAAP,CAAY,GAAG,CAAC,MAAhB;AACA,MAAA,IAAI,CAAC,IAAL,CAAU,GAAG,CAAC,YAAD,CAAb;AACD;;AAED,WAAO;AACL,MAAA,MAAM,EAAA,MADD;AAEL,MAAA,IAAI,EAAA;AAFC,KAAP;AAID,GAdS;AAgBV;;;AAGG;;;AACO,EAAA,IAAA,CAAA,SAAA,CAAA,YAAA,GAAV,YAAA;AACE,QAAI,KAAK,WAAT,EAAsB;AACpB,aAAO,MAAA,CAAA,SAAA,CAAM,YAAN,CAAkB,IAAlB,CAAkB,IAAlB,CAAP;AACD;;AACD,QAAM,MAAM,GAAG,KAAK,SAAL,EAAf;AACA,WAAO,MAAM,CAAC,GAAd;AACD,GANS;;AAOZ,SAAA,IAAA;AAAC,CAtDD,CAAkC,IAAlC,CAAA","sourcesContent":["import { FIELD_ORIGIN } from '../constant';\nimport { MappingDatum } from '../interface';\nimport Path, { PathCfg } from './path';\nimport './shape/area';\n\n/** Area 几何标记构造函数参数 */\nexport interface AreaCfg extends PathCfg {\n  /**\n   * 面积图是否从 0 基准线开始填充。\n   * 1. 默认值为 `true`，表现如下：\n   * ![image](https://gw.alipayobjects.com/zos/rmsportal/ZQqwUCczalrKqGgagOVp.png)\n   * 2. 当值为 `false` 时，表现如下：\n   * ![image](https://gw.alipayobjects.com/zos/rmsportal/yPswkaXvUpCYOdhocGwB.png)\n   */\n  startOnZero?: boolean;\n}\n\n/**\n * Area 几何标记类。\n * 常用于绘制面积图。\n */\nexport default class Area extends Path {\n  public readonly type: string = 'area';\n  public readonly shapeType: string = 'area';\n  /** 生成图形关键点 */\n  public readonly generatePoints: boolean = true;\n  /**\n   * 面积图是否从 0 基准线开始填充。\n   * 1. 默认值为 `true`，表现如下：\n   * ![image](https://gw.alipayobjects.com/zos/rmsportal/ZQqwUCczalrKqGgagOVp.png)\n   * 2. 当值为 `false` 时，表现如下：\n   * ![image](https://gw.alipayobjects.com/zos/rmsportal/yPswkaXvUpCYOdhocGwB.png)\n   */\n  public readonly startOnZero: boolean = true;\n\n  constructor(cfg: AreaCfg) {\n    super(cfg);\n\n    const { startOnZero = true, sortable = false, showSinglePoint = false } = cfg;\n    this.startOnZero = startOnZero; // 默认为 true\n    this.sortable = sortable; // 关闭默认的 X 轴数据排序\n    this.showSinglePoint = showSinglePoint;\n  }\n\n  /**\n   * 获取图形绘制的关键点以及数据\n   * @param mappingData 映射后的数据\n   */\n  protected getPointsAndData(mappingData: MappingDatum[]) {\n    const points = [];\n    const data = [];\n\n    for (let i = 0, len = mappingData.length; i < len; i++) {\n      const obj = mappingData[i];\n      points.push(obj.points);\n      data.push(obj[FIELD_ORIGIN]);\n    }\n\n    return {\n      points,\n      data,\n    };\n  }\n\n  /**\n   * 获取 Y 轴上的最小值\n   * @returns y 字段最小值\n   */\n  protected getYMinValue(): number {\n    if (this.startOnZero) {\n      return super.getYMinValue();\n    }\n    const yScale = this.getYScale();\n    return yScale.min;\n  }\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}