{"ast":null,"code":"var _jsxFileName = \"D:\\\\code\\\\cloud-supermarket-management-system\\\\src\\\\utils\\\\CimAddCommodity\\\\CimAddCommodity.jsx\";\nimport React, { Component } from 'react';\nimport { Form, Input, Button, message, PageHeader, Select } from 'antd';\nimport { nanoid } from 'nanoid';\nimport './index.css';\nimport reqwest from 'reqwest';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst layout = {\n  labelCol: {\n    span: 8\n  },\n  wrapperCol: {\n    span: 6\n  }\n};\nconst tailLayout = {\n  wrapperCol: {\n    offset: 10,\n    span: 16\n  }\n};\nconst {\n  Option\n} = Select;\nexport default class CimAddCommodity extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      subCategory: []\n    };\n\n    this.onFinish = data => {\n      data.currentPrice = data.originalPrice;\n      data.status = \"在售\";\n      data.salesVolume = 0;\n      console.log(data);\n\n      if (data.commodityName.search(/\\s/) === -1 && data.inventory.search(/\\s/) === -1 && data.originalPlace.search(/\\s/) === -1 && data.originalPrice.search(/\\s/) === -1 && data.originalPlace.search(/\\s/) === -1 && data.weight.search(/\\s/) === -1) {\n        reqwest({\n          // 后端接口\n          url: '/addcommodity',\n          method: 'post',\n          type: 'json',\n          // 传递给后端的数据\n          data: data\n        }).then(res => {\n          console.log(res);\n          message.success(\"商品添加成功！\"); // window.location.href = '/home/cim'\n        }, () => {\n          message.error(\"商品添加失败！\");\n        });\n      } else {\n        message.warning(\"输入内容不能含有空格！\");\n      }\n    };\n\n    this.showCategoryList = () => {\n      return this.state.subCategory.map((item, index) => {\n        return /*#__PURE__*/_jsxDEV(Option, {\n          value: `${item.category}`,\n          children: item.category\n        }, nanoid(), false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 20\n        }, this);\n      });\n    };\n\n    this.categorySelectChange = e => {\n      console.log(e);\n      this.categorySelect.value = e;\n    };\n\n    this.handleFileChange = e => {\n      console.log(e.target.files[0]);\n    };\n\n    this.componentDidMount = () => {\n      // 请求分类列表\n      reqwest({\n        url: '/category/subcategory',\n        method: 'get',\n        type: 'json'\n      }).then(res => {\n        // console.log(res.results)\n        this.setState({\n          subCategory: res.results\n        });\n      });\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"contentWraper\",\n      style: {\n        minHeight: 0\n      },\n      children: [/*#__PURE__*/_jsxDEV(PageHeader, {\n        className: \"site-page-header\",\n        onBack: () => {\n          window.location.href = '/home/cim';\n        },\n        subTitle: \"\\u5546\\u54C1\\u4FE1\\u606F\\u7BA1\\u7406/\\u65B0\\u589E\\u5546\\u54C1\",\n        style: {\n          paddingLeft: 10,\n          backgroundColor: 'white'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Form, { ...layout,\n        id: \"addCommodityForm\",\n        name: \"basic\",\n        size: \"large\",\n        initialValues: {\n          remember: true\n        },\n        onFinish: this.onFinish,\n        children: [/*#__PURE__*/_jsxDEV(Form.Item, {\n          label: \"\\u5546\\u54C1\\u540D\\u79F0\",\n          name: \"commodityName\",\n          required: false,\n          rules: [{\n            required: true,\n            message: '请输入商品名称！'\n          }],\n          children: /*#__PURE__*/_jsxDEV(Input, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          label: \"\\u5546\\u54C1\\u5206\\u7C7B\",\n          name: \"category\",\n          required: false,\n          rules: [{\n            required: true,\n            message: '请输入商品分类！'\n          }],\n          children: /*#__PURE__*/_jsxDEV(Select, {\n            name: \"category\",\n            style: {\n              width: '100%'\n            } // defaultValue='onsale'\n            ,\n            ref: elev => {\n              this.categorySelect = elev;\n            },\n            onChange: this.categorySelectChange,\n            children: this.showCategoryList()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          hidden: true,\n          name: \"status\",\n          children: /*#__PURE__*/_jsxDEV(Input, {\n            value: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          hidden: true,\n          label: \"\\u5546\\u54C1\\u552E\\u4EF7\",\n          name: \"currentPrice\" // required={false}\n          // rules={[{ required: true, message: '请输入商品售价！' }]}\n          ,\n          children: /*#__PURE__*/_jsxDEV(Input, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          label: \"\\u5546\\u54C1\\u4EF7\\u683C\",\n          name: \"originalPrice\",\n          required: false,\n          rules: [{\n            required: true,\n            message: '请输入商品原价！'\n          }],\n          children: /*#__PURE__*/_jsxDEV(Input, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          label: \"\\u5546\\u54C1\\u5E93\\u5B58\",\n          name: \"inventory\",\n          required: false,\n          rules: [{\n            required: true,\n            message: '请输入商品库存！'\n          }],\n          children: /*#__PURE__*/_jsxDEV(Input, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          hidden: true,\n          name: \"salesVolume\",\n          children: /*#__PURE__*/_jsxDEV(Input, {\n            value: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          label: \"\\u5546\\u54C1\\u89C4\\u683C\",\n          name: \"weight\",\n          required: false,\n          rules: [{\n            required: true,\n            message: '请输入商品规格！'\n          }],\n          children: /*#__PURE__*/_jsxDEV(Input, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          label: \"\\u5546\\u54C1\\u4EA7\\u5730\",\n          name: \"originalPlace\",\n          required: false,\n          rules: [{\n            required: true,\n            message: '请输入商品产地！'\n          }],\n          children: /*#__PURE__*/_jsxDEV(Input, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          label: \"\\u5546\\u54C1\\u56FE\\u7247\",\n          name: \"file\",\n          required: false,\n          rules: [{\n            required: true,\n            message: '请上传商品图片！'\n          }],\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            onChange: this.handleFileChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, { ...tailLayout,\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            type: \"primary\",\n            htmlType: \"submit\",\n            style: {\n              borderRadius: 5\n            },\n            children: \"\\u6DFB\\u52A0\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["D:/code/cloud-supermarket-management-system/src/utils/CimAddCommodity/CimAddCommodity.jsx"],"names":["React","Component","Form","Input","Button","message","PageHeader","Select","nanoid","reqwest","layout","labelCol","span","wrapperCol","tailLayout","offset","Option","CimAddCommodity","state","subCategory","onFinish","data","currentPrice","originalPrice","status","salesVolume","console","log","commodityName","search","inventory","originalPlace","weight","url","method","type","then","res","success","error","warning","showCategoryList","map","item","index","category","categorySelectChange","e","categorySelect","value","handleFileChange","target","files","componentDidMount","setState","results","render","minHeight","window","location","href","paddingLeft","backgroundColor","remember","required","width","elev","borderRadius"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { Form, Input, Button, message, PageHeader, Select } from 'antd';\r\nimport { nanoid } from 'nanoid'\r\nimport './index.css'\r\nimport reqwest from 'reqwest';\r\n\r\nconst layout = {\r\n    labelCol: { span: 8 },\r\n    wrapperCol: { span: 6 },\r\n};\r\nconst tailLayout = {\r\n    wrapperCol: { offset: 10, span: 16 },\r\n};\r\n\r\nconst { Option } = Select;\r\n\r\n\r\nexport default class CimAddCommodity extends Component {\r\n\r\n    state = {\r\n        subCategory: [],\r\n    }\r\n\r\n    onFinish = (data) => {\r\n        data.currentPrice = data.originalPrice\r\n        data.status = \"在售\"\r\n        data.salesVolume = 0\r\n        console.log(data)\r\n        if (\r\n            data.commodityName.search(/\\s/) === -1 &&\r\n            data.inventory.search(/\\s/) === -1 &&\r\n            data.originalPlace.search(/\\s/) === -1 &&\r\n            data.originalPrice.search(/\\s/) === -1 &&\r\n            data.originalPlace.search(/\\s/) === -1 &&\r\n            data.weight.search(/\\s/) === -1\r\n        ) {\r\n            reqwest({\r\n                // 后端接口\r\n                url: '/addcommodity',\r\n                method: 'post',\r\n                type: 'json',\r\n                // 传递给后端的数据\r\n                data: data,\r\n            })\r\n                .then(res => {\r\n                    console.log(res)\r\n                    message.success(\"商品添加成功！\")\r\n                    // window.location.href = '/home/cim'\r\n                }, () => {\r\n                    message.error(\"商品添加失败！\")\r\n                })\r\n        } else {\r\n            message.warning(\"输入内容不能含有空格！\")\r\n        }\r\n    };\r\n\r\n    // 渲染分类下拉框的选项\r\n    showCategoryList = () => {\r\n        return this.state.subCategory.map((item, index) => {\r\n            return <Option value={`${item.category}`} key={nanoid()}>{item.category}</Option>\r\n        })\r\n    }\r\n\r\n    // 获取下拉框的值\r\n    categorySelectChange = (e) => {\r\n        console.log(e)\r\n        this.categorySelect.value = e\r\n    }\r\n\r\n    handleFileChange = (e) => {\r\n        console.log(e.target.files[0])\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        // 请求分类列表\r\n        reqwest({\r\n            url: '/category/subcategory',\r\n            method: 'get',\r\n            type: 'json'\r\n        })\r\n            .then(res => {\r\n                // console.log(res.results)\r\n                this.setState({\r\n                    subCategory: res.results\r\n                })\r\n            })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"contentWraper\" style={{ minHeight: 0 }}>\r\n                <PageHeader\r\n                    className=\"site-page-header\"\r\n                    onBack={() => { window.location.href = '/home/cim' }}\r\n                    subTitle=\"商品信息管理/新增商品\"\r\n                    style={{ paddingLeft: 10, backgroundColor: 'white' }}\r\n                />\r\n                <Form\r\n                    {...layout}\r\n                    id=\"addCommodityForm\"\r\n                    name=\"basic\"\r\n                    size=\"large\"\r\n                    initialValues={{ remember: true }}\r\n                    onFinish={this.onFinish}\r\n                >\r\n                    <Form.Item\r\n                        label=\"商品名称\"\r\n                        name=\"commodityName\"\r\n                        required={false}\r\n                        rules={[{ required: true, message: '请输入商品名称！' }]}\r\n                    >\r\n                        <Input />\r\n                    </Form.Item>\r\n\r\n                    <Form.Item\r\n                        label=\"商品分类\"\r\n                        name=\"category\"\r\n                        required={false}\r\n                        rules={[{ required: true, message: '请输入商品分类！' }]}\r\n                    >\r\n                        <Select\r\n                            name='category'\r\n                            style={{ width: '100%' }}\r\n                            // defaultValue='onsale'\r\n                            ref={elev => { this.categorySelect = elev }}\r\n                            onChange={this.categorySelectChange}\r\n                        >\r\n                            {this.showCategoryList()}\r\n                        </Select >\r\n                    </Form.Item>\r\n\r\n                    <Form.Item\r\n                        hidden\r\n                        name=\"status\"\r\n                    >\r\n                        <Input value=\"\" />\r\n                    </Form.Item>\r\n\r\n                    <Form.Item\r\n                        hidden\r\n                        label=\"商品售价\"\r\n                        name=\"currentPrice\"\r\n                    // required={false}\r\n                    // rules={[{ required: true, message: '请输入商品售价！' }]}\r\n                    >\r\n                        <Input />\r\n                    </Form.Item>\r\n\r\n                    <Form.Item\r\n                        label=\"商品价格\"\r\n                        name=\"originalPrice\"\r\n                        required={false}\r\n                        rules={[{ required: true, message: '请输入商品原价！' }]}\r\n                    >\r\n                        <Input />\r\n                    </Form.Item>\r\n\r\n\r\n                    <Form.Item\r\n                        label=\"商品库存\"\r\n                        name=\"inventory\"\r\n                        required={false}\r\n                        rules={[{ required: true, message: '请输入商品库存！' }]}\r\n                    >\r\n                        <Input />\r\n                    </Form.Item>\r\n\r\n                    <Form.Item\r\n                        hidden\r\n                        name=\"salesVolume\"\r\n                    >\r\n                        <Input value=\"\" />\r\n                    </Form.Item>\r\n\r\n                    <Form.Item\r\n                        label=\"商品规格\"\r\n                        name=\"weight\"\r\n                        required={false}\r\n                        rules={[{ required: true, message: '请输入商品规格！' }]}\r\n                    >\r\n                        <Input />\r\n                    </Form.Item>\r\n\r\n                    <Form.Item\r\n                        label=\"商品产地\"\r\n                        name=\"originalPlace\"\r\n                        required={false}\r\n                        rules={[{ required: true, message: '请输入商品产地！' }]}\r\n                    >\r\n                        <Input />\r\n                    </Form.Item>\r\n\r\n                    <Form.Item\r\n                        label=\"商品图片\"\r\n                        name=\"file\"\r\n                        required={false}\r\n                        rules={[{ required: true, message: '请上传商品图片！' }]}\r\n                    >\r\n                        <input type=\"file\" onChange={this.handleFileChange} />\r\n                    </Form.Item>\r\n\r\n                    <Form.Item {...tailLayout}>\r\n                        <Button type=\"primary\" htmlType=\"submit\" style={{ borderRadius: 5 }}>\r\n                            添加\r\n                        </Button>\r\n                    </Form.Item>\r\n                </Form>\r\n            </div>\r\n\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}