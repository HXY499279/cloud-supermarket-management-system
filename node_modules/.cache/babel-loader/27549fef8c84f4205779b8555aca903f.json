{"ast":null,"code":"import _objectSpread from\"D:/code/cloud-supermarket-management-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"D:/code/cloud-supermarket-management-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"D:/code/cloud-supermarket-management-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"D:/code/cloud-supermarket-management-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"D:/code/cloud-supermarket-management-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Form,Input,Button,Checkbox,message,Image}from'antd';import'antd/dist/antd.css';import'./index.css';import reqwest from'reqwest';import pic from'../../assets/2.jpg';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var layout={labelCol:{span:10},wrapperCol:{span:50}};var tailLayout={wrapperCol:{offset:0,span:10}};var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(props){var _this;_classCallCheck(this,Login);_this=_super.call(this,props);_this.submitHandle=function(){// console.log(this.nameElem.props.value)\n// console.log(this.passwordElem.props.value)\nif(_this.nameElem.props.value!==undefined&&_this.passwordElem.props.value!==undefined){var admin=_this.state.admin;admin.asname=_this.nameElem.props.value;admin.password=_this.passwordElem.props.value;_this.setState({admin:admin},function(){// console.log(this.state.admin)\nreqwest({url:'/login',method:'post',type:'json',data:_this.state.admin}).then(function(res){console.log(res);_this.setState({status:res.status},function(){var status=_this.state.status;if(status==='success'){message.success(\"登陆成功！\");var adminObj=JSON.stringify(_this.state.admin);// console.log(adminObj)\nsessionStorage.setItem(\"admin\",adminObj);window.location.href=\"./home\";}else{message.error(\"账号或密码错误！\");_this.nameElem.input.value='';_this.passwordElem.input.value='';}});},function(){message.error(\"服务器出错！\");}).catch(function(err){message.error(\"服务器出错！\");});});}};_this.state={admin:{asname:'',password:''},status:''};return _this;}_createClass(Login,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Image,{id:\"pageLogin\",src:pic,preview:false}),/*#__PURE__*/_jsxs(\"div\",{id:\"formWrap\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"login-p\",style:{color:'white',fontSize:18},children:\"\\u8BF7\\u4F7F\\u7528\\u60A8\\u7684\\u8D26\\u53F7\\u5BC6\\u7801\\u767B\\u5F55\\u7CFB\\u7EDF\"}),/*#__PURE__*/_jsxs(Form,_objectSpread(_objectSpread({initialValues:{remember:true}},layout),{},{children:[/*#__PURE__*/_jsx(Form.Item,{name:\"asname\",rules:[{required:true,message:'请输入你的用户名！'}],children:/*#__PURE__*/_jsx(Input,{ref:function ref(input){_this2.nameElem=input;},style:{borderRadius:7},placeholder:\"\\u8BF7\\u8F93\\u5165\\u8D26\\u53F7\"})}),/*#__PURE__*/_jsx(Form.Item,{name:\"password\",rules:[{required:true,message:'请输入你的密码！'}],children:/*#__PURE__*/_jsx(Input.Password,{ref:function ref(input){_this2.passwordElem=input;},style:{borderRadius:7},placeholder:\"\\u8BF7\\u8F93\\u5165\\u5BC6\\u7801\"})}),/*#__PURE__*/_jsx(Form.Item,_objectSpread(_objectSpread({},tailLayout),{},{name:\"remember\",valuePropName:\"checked\",children:/*#__PURE__*/_jsx(Checkbox,{style:{color:'white'},children:\"\\u8BB0\\u4F4F\\u5BC6\\u7801\"})})),/*#__PURE__*/_jsx(Form.Item,_objectSpread(_objectSpread({},tailLayout),{},{children:/*#__PURE__*/_jsx(Button,{type:\"primary\",htmlType:\"submit\",id:\"submit\",onClick:this.submitHandle,style:{borderRadius:7},children:\"\\u767B\\u9646\"})}))]})),/*#__PURE__*/_jsx(\"p\",{className:\"login-p\",style:{color:'white'},children:\"CQUPT-Supermarket-Management-System\"}),/*#__PURE__*/_jsx(\"p\",{className:\"login-p\",style:{color:'white'},children:\"Designed By LTH\"})]})]});}}]);return Login;}(Component);export{Login as default};","map":{"version":3,"sources":["D:/code/cloud-supermarket-management-system/src/pages/Login/Login.js"],"names":["React","Component","Form","Input","Button","Checkbox","message","Image","reqwest","pic","layout","labelCol","span","wrapperCol","tailLayout","offset","Login","props","submitHandle","nameElem","value","undefined","passwordElem","admin","state","asname","password","setState","url","method","type","data","then","res","console","log","status","success","adminObj","JSON","stringify","sessionStorage","setItem","window","location","href","error","input","catch","err","color","fontSize","remember","required","borderRadius"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Form, Input, Button, Checkbox, message, Image } from 'antd';\r\nimport 'antd/dist/antd.css';\r\nimport './index.css';\r\nimport reqwest from 'reqwest'\r\nimport pic from '../../assets/2.jpg'\r\n\r\nconst layout = {\r\n    labelCol: { span: 10 },\r\n    wrapperCol: { span: 50 },\r\n};\r\nconst tailLayout = {\r\n    wrapperCol: { offset: 0, span: 10 },\r\n};\r\n\r\nexport default class Login extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            admin: {\r\n                asname: '',\r\n                password: ''\r\n            },\r\n            status: ''\r\n        }\r\n    }\r\n\r\n    submitHandle = () => {\r\n        // console.log(this.nameElem.props.value)\r\n        // console.log(this.passwordElem.props.value)\r\n        if (this.nameElem.props.value !== undefined && this.passwordElem.props.value !== undefined) {\r\n            let admin = this.state.admin\r\n            admin.asname = this.nameElem.props.value\r\n            admin.password = this.passwordElem.props.value\r\n            this.setState({\r\n                admin\r\n            }, () => {\r\n                // console.log(this.state.admin)\r\n                reqwest({\r\n                    url: '/login',\r\n                    method: 'post',\r\n                    type: 'json',\r\n                    data: this.state.admin\r\n                })\r\n                    .then((res) => {\r\n                        console.log(res)\r\n                        this.setState({\r\n                            status: res.status\r\n                        }, () => {\r\n                            let status = this.state.status\r\n                            if (status === 'success') {\r\n                                message.success(\"登陆成功！\")\r\n                                let adminObj = JSON.stringify(this.state.admin)\r\n                                // console.log(adminObj)\r\n                                sessionStorage.setItem(\"admin\", adminObj)\r\n                                window.location.href = \"./home\"\r\n                            } else {\r\n                                message.error(\"账号或密码错误！\")\r\n                                this.nameElem.input.value = ''\r\n                                this.passwordElem.input.value = ''\r\n                            }\r\n                        })\r\n                    }, () => {\r\n                        message.error(\"服务器出错！\")\r\n                    })\r\n                    .catch(err => {\r\n                        message.error(\"服务器出错！\")\r\n                    })\r\n            })\r\n\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <Image id=\"pageLogin\" src={pic} preview={false} />\r\n                <div id=\"formWrap\">\r\n                    <p className=\"login-p\" style={{ color: 'white', fontSize: 18 }}>请使用您的账号密码登录系统</p>\r\n                    <Form\r\n                        initialValues={{ remember: true }}\r\n                        {...layout}\r\n                    >\r\n                        <Form.Item\r\n                            name=\"asname\"\r\n                            rules={[{ required: true, message: '请输入你的用户名！' }]}\r\n                        >\r\n                            <Input ref={input => { this.nameElem = input }} style={{ borderRadius: 7 }} placeholder='请输入账号' />\r\n                        </Form.Item>\r\n\r\n                        <Form.Item\r\n                            name=\"password\"\r\n                            rules={[{ required: true, message: '请输入你的密码！' }]}\r\n                        >\r\n                            <Input.Password ref={input => { this.passwordElem = input }} style={{ borderRadius: 7 }} placeholder='请输入密码' />\r\n                        </Form.Item>\r\n\r\n                        <Form.Item {...tailLayout} name=\"remember\" valuePropName=\"checked\">\r\n                            <Checkbox style={{ color: 'white' }}>记住密码</Checkbox>\r\n                        </Form.Item>\r\n\r\n                        <Form.Item {...tailLayout}>\r\n                            <Button type=\"primary\" htmlType=\"submit\" id=\"submit\" onClick={this.submitHandle} style={{ borderRadius: 7 }}>\r\n                                登陆\r\n                            </Button>\r\n                        </Form.Item>\r\n                    </Form>\r\n                    <p className=\"login-p\" style={{ color: 'white' }}>CQUPT-Supermarket-Management-System</p>\r\n                    <p className=\"login-p\" style={{ color: 'white' }}>Designed By LTH</p>\r\n                </div>\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}