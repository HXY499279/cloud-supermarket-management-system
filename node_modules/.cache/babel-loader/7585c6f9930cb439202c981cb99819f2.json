{"ast":null,"code":"import { __assign, __extends } from \"tslib\";\nimport { ext } from '@antv/matrix-util';\nimport { deepMix } from '@antv/util';\nimport { parsePadding } from '../../../util/padding';\nimport Action from '../base';\nvar PADDING_RIGHT = 10;\nvar PADDING_TOP = 5;\n/**\n * Button action\n * @ignore\n */\n\nvar ButtonAction =\n/** @class */\nfunction (_super) {\n  __extends(ButtonAction, _super);\n\n  function ButtonAction() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.buttonGroup = null;\n    _this.buttonCfg = {\n      name: 'button',\n      text: 'button',\n      textStyle: {\n        x: 0,\n        y: 0,\n        fontSize: 12,\n        fill: '#333333',\n        cursor: 'pointer'\n      },\n      padding: [8, 10],\n      style: {\n        fill: '#f7f7f7',\n        stroke: '#cccccc',\n        cursor: 'pointer'\n      },\n      activeStyle: {\n        fill: '#e6e6e6'\n      }\n    };\n    return _this;\n  } // mix 默认的配置和用户配置\n\n\n  ButtonAction.prototype.getButtonCfg = function () {\n    return deepMix(this.buttonCfg, this.cfg);\n  }; // 绘制 Button 和 文本\n\n\n  ButtonAction.prototype.drawButton = function () {\n    var config = this.getButtonCfg();\n    var group = this.context.view.foregroundGroup.addGroup({\n      name: config.name\n    }); // 添加文本\n\n    var textShape = group.addShape({\n      type: 'text',\n      name: 'button-text',\n      attrs: __assign({\n        text: config.text\n      }, config.textStyle)\n    });\n    var textBBox = textShape.getBBox();\n    var padding = parsePadding(config.padding); // 添加背景按钮\n\n    var buttonShape = group.addShape({\n      type: 'rect',\n      name: 'button-rect',\n      attrs: __assign({\n        x: textBBox.x - padding[3],\n        y: textBBox.y - padding[0],\n        width: textBBox.width + padding[1] + padding[3],\n        height: textBBox.height + padding[0] + padding[2]\n      }, config.style)\n    });\n    buttonShape.toBack(); // 在后面\n    // active 效果内置\n\n    group.on('mouseenter', function () {\n      buttonShape.attr(config.activeStyle);\n    });\n    group.on('mouseleave', function () {\n      buttonShape.attr(config.style);\n    });\n    this.buttonGroup = group;\n  }; // 重置位置\n\n\n  ButtonAction.prototype.resetPosition = function () {\n    var view = this.context.view;\n    var coord = view.getCoordinate();\n    var point = coord.convert({\n      x: 1,\n      y: 1\n    }); // 后面直接改成左上角\n\n    var buttonGroup = this.buttonGroup;\n    var bbox = buttonGroup.getBBox();\n    var matrix = ext.transform(null, [['t', point.x - bbox.width - PADDING_RIGHT, point.y + bbox.height + PADDING_TOP]]);\n    buttonGroup.setMatrix(matrix);\n  };\n  /**\n   * 显示\n   */\n\n\n  ButtonAction.prototype.show = function () {\n    if (!this.buttonGroup) {\n      this.drawButton();\n    }\n\n    this.resetPosition();\n    this.buttonGroup.show();\n  };\n  /**\n   * 隐藏\n   */\n\n\n  ButtonAction.prototype.hide = function () {\n    if (this.buttonGroup) {\n      this.buttonGroup.hide();\n    }\n  };\n  /**\n   * 销毁\n   */\n\n\n  ButtonAction.prototype.destroy = function () {\n    var buttonGroup = this.buttonGroup;\n\n    if (buttonGroup) {\n      buttonGroup.remove();\n    }\n\n    _super.prototype.destroy.call(this);\n  };\n\n  return ButtonAction;\n}(Action);\n\nexport default ButtonAction;","map":{"version":3,"sources":["../../../../src/interaction/action/view/button.ts"],"names":[],"mappings":"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","sourcesContent":["import { LooseObject } from '../../../interface';\nimport { IGroup } from '@antv/g-base';\nimport { ext } from '@antv/matrix-util';\nimport { deepMix } from '@antv/util';\nimport { parsePadding } from '../../../util/padding';\nimport Action from '../base';\nconst PADDING_RIGHT = 10;\nconst PADDING_TOP = 5;\n\n/**\n * Button action\n * @ignore\n */\nclass ButtonAction extends Action {\n  private buttonGroup: IGroup = null;\n  private buttonCfg = {\n    name: 'button',\n    text: 'button',\n    textStyle: {\n      x: 0,\n      y: 0,\n      fontSize: 12,\n      fill: '#333333',\n      cursor: 'pointer',\n    },\n    padding: [8, 10],\n    style: {\n      fill: '#f7f7f7',\n      stroke: '#cccccc',\n      cursor: 'pointer',\n    },\n    activeStyle: {\n      fill: '#e6e6e6',\n    },\n  };\n  // mix 默认的配置和用户配置\n  private getButtonCfg(): LooseObject {\n    return deepMix(this.buttonCfg, this.cfg);\n  }\n  // 绘制 Button 和 文本\n  private drawButton() {\n    const config = this.getButtonCfg();\n    const group = this.context.view.foregroundGroup.addGroup({\n      name: config.name,\n    });\n    // 添加文本\n    const textShape = group.addShape({\n      type: 'text',\n      name: 'button-text',\n      attrs: {\n        text: config.text,\n        ...config.textStyle,\n      },\n    });\n    const textBBox = textShape.getBBox();\n    const padding = parsePadding(config.padding);\n    // 添加背景按钮\n    const buttonShape = group.addShape({\n      type: 'rect',\n      name: 'button-rect',\n      attrs: {\n        x: textBBox.x - padding[3],\n        y: textBBox.y - padding[0],\n        width: textBBox.width + padding[1] + padding[3],\n        height: textBBox.height + padding[0] + padding[2],\n        ...config.style,\n      },\n    });\n    buttonShape.toBack(); // 在后面\n    // active 效果内置\n    group.on('mouseenter', () => {\n      buttonShape.attr(config.activeStyle);\n    });\n    group.on('mouseleave', () => {\n      buttonShape.attr(config.style);\n    });\n    this.buttonGroup = group;\n  }\n\n  // 重置位置\n  private resetPosition() {\n    const view = this.context.view;\n    const coord = view.getCoordinate();\n    const point = coord.convert({ x: 1, y: 1 }); // 后面直接改成左上角\n    const buttonGroup = this.buttonGroup;\n    const bbox = buttonGroup.getBBox();\n    const matrix = ext.transform(null, [\n      ['t', point.x - bbox.width - PADDING_RIGHT, point.y + bbox.height + PADDING_TOP],\n    ]);\n    buttonGroup.setMatrix(matrix);\n  }\n\n  /**\n   * 显示\n   */\n  public show() {\n    if (!this.buttonGroup) {\n      this.drawButton();\n    }\n    this.resetPosition();\n    this.buttonGroup.show();\n  }\n\n  /**\n   * 隐藏\n   */\n  public hide() {\n    if (this.buttonGroup) {\n      this.buttonGroup.hide();\n    }\n  }\n\n  /**\n   * 销毁\n   */\n  public destroy() {\n    const buttonGroup = this.buttonGroup;\n    if (buttonGroup) {\n      buttonGroup.remove();\n    }\n    super.destroy();\n  }\n}\n\nexport default ButtonAction;\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}