{"ast":null,"code":"/**\n * @fileoverview rect\n * @author dengfuping_develop@163.com\n */\nimport { __assign, __extends } from \"tslib\";\nimport { each, isArray } from '@antv/util';\nimport ShapeBase from './base';\nimport { SVG_ATTR_MAP } from '../constant';\nimport { parseRadius } from '../util/format';\n\nvar Rect =\n/** @class */\nfunction (_super) {\n  __extends(Rect, _super);\n\n  function Rect() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = 'rect';\n    _this.canFill = true;\n    _this.canStroke = true;\n    return _this;\n  }\n\n  Rect.prototype.getDefaultAttrs = function () {\n    var attrs = _super.prototype.getDefaultAttrs.call(this);\n\n    return __assign(__assign({}, attrs), {\n      x: 0,\n      y: 0,\n      width: 0,\n      height: 0,\n      radius: 0\n    });\n  };\n\n  Rect.prototype.createPath = function (context, targetAttrs) {\n    var _this = this;\n\n    var attrs = this.attr();\n    var el = this.get('el'); // 加上状态量，用来标记 path 是否已组装\n\n    var completed = false; // 和组装 path 相关的绘图属性\n\n    var pathRelatedAttrs = ['x', 'y', 'width', 'height', 'radius'];\n    each(targetAttrs || attrs, function (value, attr) {\n      if (pathRelatedAttrs.indexOf(attr) !== -1 && !completed) {\n        el.setAttribute('d', _this._assembleRect(attrs));\n        completed = true;\n      } else if (pathRelatedAttrs.indexOf(attr) === -1 && SVG_ATTR_MAP[attr]) {\n        el.setAttribute(SVG_ATTR_MAP[attr], value);\n      }\n    });\n  };\n\n  Rect.prototype._assembleRect = function (attrs) {\n    var x = attrs.x;\n    var y = attrs.y;\n    var w = attrs.width;\n    var h = attrs.height;\n    var radius = attrs.radius;\n\n    if (!radius) {\n      return \"M \" + x + \",\" + y + \" l \" + w + \",0 l 0,\" + h + \" l\" + -w + \" 0 z\";\n    }\n\n    var r = parseRadius(radius);\n\n    if (isArray(radius)) {\n      if (radius.length === 1) {\n        r.r1 = r.r2 = r.r3 = r.r4 = radius[0];\n      } else if (radius.length === 2) {\n        r.r1 = r.r3 = radius[0];\n        r.r2 = r.r4 = radius[1];\n      } else if (radius.length === 3) {\n        r.r1 = radius[0];\n        r.r2 = r.r4 = radius[1];\n        r.r3 = radius[2];\n      } else {\n        r.r1 = radius[0];\n        r.r2 = radius[1];\n        r.r3 = radius[2];\n        r.r4 = radius[3];\n      }\n    } else {\n      r.r1 = r.r2 = r.r3 = r.r4 = radius;\n    }\n\n    var d = [[\"M \" + (x + r.r1) + \",\" + y], [\"l \" + (w - r.r1 - r.r2) + \",0\"], [\"a \" + r.r2 + \",\" + r.r2 + \",0,0,1,\" + r.r2 + \",\" + r.r2], [\"l 0,\" + (h - r.r2 - r.r3)], [\"a \" + r.r3 + \",\" + r.r3 + \",0,0,1,\" + -r.r3 + \",\" + r.r3], [\"l \" + (r.r3 + r.r4 - w) + \",0\"], [\"a \" + r.r4 + \",\" + r.r4 + \",0,0,1,\" + -r.r4 + \",\" + -r.r4], [\"l 0,\" + (r.r4 + r.r1 - h)], [\"a \" + r.r1 + \",\" + r.r1 + \",0,0,1,\" + r.r1 + \",\" + -r.r1], ['z']];\n    return d.join(' ');\n  };\n\n  return Rect;\n}(ShapeBase);\n\nexport default Rect;","map":{"version":3,"sources":["../../src/shape/rect.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["/**\n * @fileoverview rect\n * @author dengfuping_develop@163.com\n */\nimport { __assign, __extends } from \"tslib\";\nimport { each, isArray } from '@antv/util';\nimport ShapeBase from './base';\nimport { SVG_ATTR_MAP } from '../constant';\nimport { parseRadius } from '../util/format';\nvar Rect = /** @class */ (function (_super) {\n    __extends(Rect, _super);\n    function Rect() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'rect';\n        _this.canFill = true;\n        _this.canStroke = true;\n        return _this;\n    }\n    Rect.prototype.getDefaultAttrs = function () {\n        var attrs = _super.prototype.getDefaultAttrs.call(this);\n        return __assign(__assign({}, attrs), { x: 0, y: 0, width: 0, height: 0, radius: 0 });\n    };\n    Rect.prototype.createPath = function (context, targetAttrs) {\n        var _this = this;\n        var attrs = this.attr();\n        var el = this.get('el');\n        // 加上状态量，用来标记 path 是否已组装\n        var completed = false;\n        // 和组装 path 相关的绘图属性\n        var pathRelatedAttrs = ['x', 'y', 'width', 'height', 'radius'];\n        each(targetAttrs || attrs, function (value, attr) {\n            if (pathRelatedAttrs.indexOf(attr) !== -1 && !completed) {\n                el.setAttribute('d', _this._assembleRect(attrs));\n                completed = true;\n            }\n            else if (pathRelatedAttrs.indexOf(attr) === -1 && SVG_ATTR_MAP[attr]) {\n                el.setAttribute(SVG_ATTR_MAP[attr], value);\n            }\n        });\n    };\n    Rect.prototype._assembleRect = function (attrs) {\n        var x = attrs.x;\n        var y = attrs.y;\n        var w = attrs.width;\n        var h = attrs.height;\n        var radius = attrs.radius;\n        if (!radius) {\n            return \"M \" + x + \",\" + y + \" l \" + w + \",0 l 0,\" + h + \" l\" + -w + \" 0 z\";\n        }\n        var r = parseRadius(radius);\n        if (isArray(radius)) {\n            if (radius.length === 1) {\n                r.r1 = r.r2 = r.r3 = r.r4 = radius[0];\n            }\n            else if (radius.length === 2) {\n                r.r1 = r.r3 = radius[0];\n                r.r2 = r.r4 = radius[1];\n            }\n            else if (radius.length === 3) {\n                r.r1 = radius[0];\n                r.r2 = r.r4 = radius[1];\n                r.r3 = radius[2];\n            }\n            else {\n                r.r1 = radius[0];\n                r.r2 = radius[1];\n                r.r3 = radius[2];\n                r.r4 = radius[3];\n            }\n        }\n        else {\n            r.r1 = r.r2 = r.r3 = r.r4 = radius;\n        }\n        var d = [\n            [\"M \" + (x + r.r1) + \",\" + y],\n            [\"l \" + (w - r.r1 - r.r2) + \",0\"],\n            [\"a \" + r.r2 + \",\" + r.r2 + \",0,0,1,\" + r.r2 + \",\" + r.r2],\n            [\"l 0,\" + (h - r.r2 - r.r3)],\n            [\"a \" + r.r3 + \",\" + r.r3 + \",0,0,1,\" + -r.r3 + \",\" + r.r3],\n            [\"l \" + (r.r3 + r.r4 - w) + \",0\"],\n            [\"a \" + r.r4 + \",\" + r.r4 + \",0,0,1,\" + -r.r4 + \",\" + -r.r4],\n            [\"l 0,\" + (r.r4 + r.r1 - h)],\n            [\"a \" + r.r1 + \",\" + r.r1 + \",0,0,1,\" + r.r1 + \",\" + -r.r1],\n            ['z'],\n        ];\n        return d.join(' ');\n    };\n    return Rect;\n}(ShapeBase));\nexport default Rect;\n//# sourceMappingURL=rect.js.map"]},"metadata":{},"sourceType":"module"}