{"ast":null,"code":"import { __extends } from \"tslib\";\nimport { filter, getRange, head, isNil, last } from '@antv/util';\nimport Base from '../base';\n/**\n * 连续度量的基类\n * @class\n */\n\nvar Continuous =\n/** @class */\nfunction (_super) {\n  __extends(Continuous, _super);\n\n  function Continuous() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.isContinuous = true;\n    return _this;\n  }\n\n  Continuous.prototype.scale = function (value) {\n    if (isNil(value)) {\n      return NaN;\n    }\n\n    var rangeMin = this.rangeMin();\n    var rangeMax = this.rangeMax();\n    var max = this.max;\n    var min = this.min;\n\n    if (max === min) {\n      return rangeMin;\n    }\n\n    var percent = this.getScalePercent(value);\n    return rangeMin + percent * (rangeMax - rangeMin);\n  };\n\n  Continuous.prototype.init = function () {\n    _super.prototype.init.call(this); // init 完成后保证 min, max 包含 ticks 的范围\n\n\n    var ticks = this.ticks;\n    var firstTick = head(ticks);\n    var lastTick = last(ticks);\n\n    if (firstTick < this.min) {\n      this.min = firstTick;\n    }\n\n    if (lastTick > this.max) {\n      this.max = lastTick;\n    } // strict-limit 方式\n\n\n    if (!isNil(this.minLimit)) {\n      this.min = firstTick;\n    }\n\n    if (!isNil(this.maxLimit)) {\n      this.max = lastTick;\n    }\n  };\n\n  Continuous.prototype.setDomain = function () {\n    var _a = getRange(this.values),\n        min = _a.min,\n        max = _a.max;\n\n    if (isNil(this.min)) {\n      this.min = min;\n    }\n\n    if (isNil(this.max)) {\n      this.max = max;\n    }\n\n    if (this.min > this.max) {\n      this.min = min;\n      this.max = max;\n    }\n  };\n\n  Continuous.prototype.calculateTicks = function () {\n    var _this = this;\n\n    var ticks = _super.prototype.calculateTicks.call(this);\n\n    if (!this.nice) {\n      ticks = filter(ticks, function (tick) {\n        return tick >= _this.min && tick <= _this.max;\n      });\n    }\n\n    return ticks;\n  }; // 计算原始值值占的百分比\n\n\n  Continuous.prototype.getScalePercent = function (value) {\n    var max = this.max;\n    var min = this.min;\n    return (value - min) / (max - min);\n  };\n\n  Continuous.prototype.getInvertPercent = function (value) {\n    return (value - this.rangeMin()) / (this.rangeMax() - this.rangeMin());\n  };\n\n  return Continuous;\n}(Base);\n\nexport default Continuous;","map":{"version":3,"sources":["../../src/continuous/base.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import { __extends } from \"tslib\";\nimport { filter, getRange, head, isNil, last } from '@antv/util';\nimport Base from '../base';\n/**\n * 连续度量的基类\n * @class\n */\nvar Continuous = /** @class */ (function (_super) {\n    __extends(Continuous, _super);\n    function Continuous() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.isContinuous = true;\n        return _this;\n    }\n    Continuous.prototype.scale = function (value) {\n        if (isNil(value)) {\n            return NaN;\n        }\n        var rangeMin = this.rangeMin();\n        var rangeMax = this.rangeMax();\n        var max = this.max;\n        var min = this.min;\n        if (max === min) {\n            return rangeMin;\n        }\n        var percent = this.getScalePercent(value);\n        return rangeMin + percent * (rangeMax - rangeMin);\n    };\n    Continuous.prototype.init = function () {\n        _super.prototype.init.call(this);\n        // init 完成后保证 min, max 包含 ticks 的范围\n        var ticks = this.ticks;\n        var firstTick = head(ticks);\n        var lastTick = last(ticks);\n        if (firstTick < this.min) {\n            this.min = firstTick;\n        }\n        if (lastTick > this.max) {\n            this.max = lastTick;\n        }\n        // strict-limit 方式\n        if (!isNil(this.minLimit)) {\n            this.min = firstTick;\n        }\n        if (!isNil(this.maxLimit)) {\n            this.max = lastTick;\n        }\n    };\n    Continuous.prototype.setDomain = function () {\n        var _a = getRange(this.values), min = _a.min, max = _a.max;\n        if (isNil(this.min)) {\n            this.min = min;\n        }\n        if (isNil(this.max)) {\n            this.max = max;\n        }\n        if (this.min > this.max) {\n            this.min = min;\n            this.max = max;\n        }\n    };\n    Continuous.prototype.calculateTicks = function () {\n        var _this = this;\n        var ticks = _super.prototype.calculateTicks.call(this);\n        if (!this.nice) {\n            ticks = filter(ticks, function (tick) {\n                return tick >= _this.min && tick <= _this.max;\n            });\n        }\n        return ticks;\n    };\n    // 计算原始值值占的百分比\n    Continuous.prototype.getScalePercent = function (value) {\n        var max = this.max;\n        var min = this.min;\n        return (value - min) / (max - min);\n    };\n    Continuous.prototype.getInvertPercent = function (value) {\n        return (value - this.rangeMin()) / (this.rangeMax() - this.rangeMin());\n    };\n    return Continuous;\n}(Base));\nexport default Continuous;\n//# sourceMappingURL=base.js.map"]},"metadata":{},"sourceType":"module"}